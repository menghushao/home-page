<!DOCTYPE html>
<html lang="zh-Hant"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>èŒè™ç‡’ | é›è›‹ç³•ãƒ»ç”œé»ãƒ»ä¸‹åˆèŒ¶ </title>
  <meta name="description" content="èŒè™ç‡’æ˜¯è‹—æ —å¸‚çš„ç¾é»ç¾åšé›è›‹ç³•å°ˆè³£åº—ï¼Œæä¾›å¤šç¨®å‰µæ„å£å‘³èˆ‡é£²å“ï¼Œæ”¯æ´å¤–é€èˆ‡ç·šä¸Šé»é¤ã€‚">
  <meta name="keywords" content="èŒè™ç‡’,é›è›‹ç³•,è‹—æ —é›è›‹ç³•,ç”œé»,ä¸‹åˆèŒ¶,è‹—æ —é»å¿ƒ,èŒè™ç‡’èœå–®,èŒè™ç‡’è¨‚è³¼">

<style>
/* === v1.7.5 (mobile/desktop polish + cart toggle + badge) === */
:root{
  --mh-muted:#4b5563; --mh-text:#111827; --mh-line:#e5e7eb; --mh-card:#ffffff;
  --mh-accent:#3b82f6;
  --mh-cart-bg:#f5ede3;        /* æ·¡å’–å•¡åº• */
  --mh-cart-text:#2b1d14;      /* æ·±å’–å•¡å­— */
}
.mh-fab, .mh-panel, .mh-cart { font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", Arial; }
.mh-fab{
  position: fixed; z-index: 10001; background: linear-gradient(180deg, #60a5fa, #3b82f6);
  color:#fff; border:0; border-radius:999px; padding:10px 14px; font-size:14px; cursor:pointer;
  box-shadow:0 6px 24px rgba(59,130,246,.35);
}
#mh-fab{}
#mh-cart-fab{
  position: fixed; z-index: 10003; background: linear-gradient(180deg, #a7805a, #8b6a49); color:#fff;
  border:0; border-radius:999px; padding:10px 14px; font-size:14px; box-shadow:0 6px 24px rgba(0,0,0,.25);
}
/* badge on cart fab */
#mh-cart-fab{ position: fixed; }
#mh-cart-fab-badge{
  position:absolute; top:-6px; right:-6px; min-width:18px; height:18px; padding:0 4px;
  border-radius:999px; background:#ef4444; color:#fff; font-size:12px; line-height:18px; text-align:center;
  display:none; align-items:center; justify-content:center; box-shadow:0 2px 6px rgba(0,0,0,.2);
}
/* Cart drawer */
.mh-cart{
  position: fixed; z-index: 10000;
  top: 64px; left: 50%; width: 360px; background: var(--mh-cart-bg);
  border:1px solid #e1d5c7; border-radius:16px; padding:12px;
  display:grid; gap:10px; max-height:72vh; overflow:auto; color: var(--mh-cart-text);
  box-shadow: 0 10px 24px rgba(0,0,0,.12);
  opacity:0; visibility:hidden; pointer-events:none; transition: opacity .2s ease, transform .22s ease;
}
.mh-cart.open{ opacity:1; visibility:visible; pointer-events:auto; }
.mh-cart h4{ margin:0; font-size:15px; display:flex; align-items:center; justify-content:space-between; gap:8px; color: var(--mh-cart-text); }
.mh-badge{ font-size:12px; padding:2px 8px; border-radius:999px; background:#efe4d7; color:#5b402d; border:1px solid #e1d5c7; }
.mh-cart-empty{ color:#6b4f3f; font-size:13px; }
.mh-cart-list{ display:grid; gap:10px; }
.mh-cart-item{ border:1px solid #e1d5c7; border-radius:12px; padding:10px; background:#fffdf9; display:flex; align-items:center; justify-content:space-between; gap:8px; }
.mh-name{ font-size:14px; color:#2b1d14; }
.mh-del, .mh-edit, .mh-close{ background:#fff; border:1px solid #d9cbbb; color:#533b2a; border-radius:10px; padding:6px 8px; cursor:pointer; font-size:12px; }
.mh-btn{ padding:10px 14px; border-radius:10px; border:1px solid #cbd5e1; background:#f8fafc; color:#111827; cursor:pointer; }
.mh-btn.primary{ background: linear-gradient(180deg, #60a5fa, #3b82f6); border:none; color:#fff; }
.mh-field label{ font-size:12px; color:#6b7280; display:block; margin:0 0 4px; }
.mh-input, .mh-select, .mh-number { width:100%; padding:8px 10px; border-radius:10px; border:1px solid #cbd5e1; background:#fff; color:#111827; font-size:14px; }
.mh-row-2{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.mh-row-3{ display:grid; grid-template-columns:repeat(3,1fr); gap:8px; }
.mh-total{ padding:10px; border:1px dashed #d1d5db; border-radius:10px; font-size:14px; color:#111827; background:#f4ece4; }
.mh-total small{ color:#6b7280; }

/* Panel */
.mh-panel{
  position: fixed; right: -420px; top: 0; height: 100vh; width: 400px;
  background: #ffffff; border-left:1px solid #e5e7eb; box-shadow:-10px 0 40px rgba(0,0,0,.08);
  transition:right .22s ease; display:grid; grid-template-rows:auto 1fr auto; overflow:hidden; color:#111827; z-index: 10002;
}
.mh-panel.open{ right:0; }
.mh-panel-head{ padding:12px 14px; border-bottom:1px solid #e5e7eb; display:flex; align-items:center; justify-content:space-between; gap:8px; background:#f8fafc; }
.mh-panel-body{ padding:12px 14px; overflow:auto; }
.mh-panel .mh-panel-actions{ display:none; } /* hidden in both views; we use inline actions */
.mh-actions-inline{
  position: sticky; bottom: 0; z-index: 2; display:flex; gap:8px; padding:10px 12px; background:#ffffff; border-top:1px solid #e5e7eb;
}
.mh-actions-inline .mh-btn{ flex:1; min-height:44px; }

/* Mobile */
@media (max-width:1023.98px){
  .mh-fab{ right:12px; bottom:64px; left:auto; top:auto; transform:none; }
  #mh-cart-fab{ right:12px; bottom:12px; left:auto; top:auto; }
  .mh-panel{
    left:0; right:0; width:100vw; bottom:0; top:auto; height:auto; max-height:86vh;
    border-left:none; border-top:1px solid #e5e7eb; border-radius:12px 12px 0 0;
    transform: translateY(110%); transition: transform .22s ease; box-shadow: 0 -10px 24px rgba(0,0,0,.12);
  }
  .mh-panel.open{ transform: translateY(0); }
  .mh-panel-body{ max-height: calc(86vh - 92px); overflow:auto; -webkit-overflow-scrolling: touch; }
  .mh-cart{ left:0; right:0; top:auto; bottom:0; width:auto; max-height:60vh; border-radius:12px 12px 0 0; transform: translateY(100%); }
  .mh-cart.open{ transform: translateY(0); }
}

/* Desktop */
@media (min-width:1024px){
  /* place buttons near menu edge via JS */
}
</style>


<style>
/* v1.7.6: Ensure cart actions visible */
.mh-cart .mh-panel-actions{
  display:flex; gap:8px; padding:10px 12px; border-top:1px solid #e1d5c7; background:#fffdf9; border-radius:0 0 12px 12px;
}
.mh-cart .mh-panel-actions .mh-btn{ flex:1; min-height:40px; }
@media (max-width:1023.98px){
  .mh-cart .mh-panel-actions{ position: sticky; bottom: 0; z-index: 2; }
}
</style>


<style>
/* v1.7.8: type + qty in same row; adjust column ratio on desktop */
.mh-type-qty { grid-template-columns: 1.4fr 0.6fr; }
@media (max-width:1023.98px){
  .mh-type-qty { grid-template-columns: 1fr 1fr; } /* æ‰‹æ©Ÿå¹³å‡åˆ† */
}
</style>


<style>
/* v1.7.9: desktop panel spacing + no horizontal scrollbar */
.mh-panel-body{
  display: grid;
  row-gap: 12px;
  align-content: start;   /* pack content to top, no 'north/south poles' */
  overflow-x: hidden;     /* prevent horizontal scrollbar */
}
/* prevent grid children from overflowing */
.mh-row-2, .mh-row-3, .mh-field{ min-width: 0; }
.mh-row-3{ display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:8px; }
.mh-row-2{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:8px; }
.mh-type-qty{ grid-template-columns: minmax(0,1.4fr) minmax(0,0.6fr); }
</style>


<style>
/* v1.7.10: compact panel body on desktop â€” remove grid stretch and pack content naturally */
.mh-panel-body{
  display: block;              /* stop grid tracks from stretching */
  overflow-x: hidden;
  padding-bottom: 12px;
}
.mh-field, .mh-row-2, .mh-row-3{ margin-bottom: 12px; }
.mh-row-2{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:8px; }
.mh-row-3{ display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:8px; }
.mh-type-qty{ grid-template-columns: minmax(0,1.4fr) minmax(0,0.6fr); }
</style>


<style>
/* v1.7.11: Desktop â€” inline buttons no longer sticky (sit right under accessories) */
@media (min-width:1024px){
  .mh-actions-inline{
    position: static !important;
    box-shadow: none !important;
  }
}
</style>


<style>
/* v1.7.12: Desktop â€” make panel a compact flex column, no stretched middle area */
@media (min-width:1024px){
  .mh-panel{
    display: flex !important;
    flex-direction: column !important;
    height: auto !important;
    max-height: 92vh !important;
  }
  .mh-panel-head{ flex: 0 0 auto; }
  .mh-panel-body{
    flex: 0 0 auto;      /* don't stretch */
    overflow: visible;   /* let content size naturally */
  }
}
</style>


<style>
/* v1.7.13 â€” desktop panel next to cart; qty field polish */
:root{ --mh-gap:12px; }
.mh-input, .mh-select, .mh-number{ box-sizing: border-box; }
.mh-number{
  text-align: center;
  /* remove browser spin buttons */
}
.mh-number::-webkit-outer-spin-button,
.mh-number::-webkit-inner-spin-button{ -webkit-appearance: none; margin:0; }
.mh-number{ -moz-appearance: textfield; }

/* make qty a bit wider on desktop */
@media (min-width:1024px){
  .mh-type-qty{ grid-template-columns: minmax(0,1.2fr) minmax(0,0.8fr); }
}

/* Desktop panel: position by JS left of screen, adjacent to cart */
@media (min-width:1024px){
  .mh-panel{
    width: 420px !important;
    left: var(--mh-panel-left, auto) !important;
    right: auto !important;
    top: 0;
    max-height: 92vh;
    z-index: 10002;
    box-shadow: -10px 0 40px rgba(0,0,0,.08);
  }
  .mh-panel.open{ /* no slide-in from right on desktop */ }
}
</style>


<style>
/* v1.7.14 â€” panel hidden by default; open shows it. Also align top/height via JS on desktop */
.mh-panel{
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}
.mh-panel.open{
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}
@media (min-width:1024px){
  .mh-panel{
    position: fixed;
    width: 420px !important;
    right: auto !important;
    left: var(--mh-panel-left, auto) !important;
    top: var(--mh-panel-top, 0) !important;
    height: var(--mh-panel-height, auto) !important;
    max-height: none !important;
    overflow: auto;
  }
}
</style>


<style>
/* v1.7.16: hide å•†å“B by default; show it with JS (display='block') whenå“é …ç‚ºã€é›è›‹ç³•ã€ */
#mh-b-wrap{ display: none; }
</style>


<style>
/* v1.7.17 â€” anchor buttons & drawers inside #menu-root; no internal scroll; toggle é»é¤ via same button */
#menu-root{ position: relative; overflow: visible; }

/* place two buttons inside menu frame, bottom-right, one left one right */
#mh-floating{
  position: absolute;
  right: 12px;
  bottom: 12px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  width: min(320px, 48%);
  align-items: end;
  z-index: 50;
}

/* ensure original fixed positioning is disabled when inside the floating container */
#mh-floating .mh-fab,
#mh-floating #mh-cart-fab{
  position: static !important;
  transform: none !important;
  right: auto !important; left: auto !important; top: auto !important; bottom: auto !important;
  margin: 0 !important;
}

/* Cart & Panel become bottom drawers INSIDE the menu frame; width ~ menu width (slightly inset) */
.mh-cart, .mh-panel{
  position: absolute !important;
  left: 12px !important;
  right: 12px !important;
  bottom: calc(12px + 44px + 8px) !important;  /* stay just above the two buttons */
  top: auto !important;
  width: auto !important; max-width: none !important;
  height: auto !important; max-height: none !important;
  overflow: visible !important;   /* no inner scrollbars */
  transform: none !important;
  border-radius: 12px !important;
  z-index: 40 !important;
  box-shadow: 0 10px 24px rgba(0,0,0,.12);
  opacity: 0; visibility: hidden; pointer-events: none;
}
.mh-cart.open, .mh-panel.open{
  opacity: 1; visibility: visible; pointer-events: auto;
}

/* Make inner areas adapt instead of scrolling */
.mh-panel-body{ overflow: visible !important; }
.mh-actions-inline,
.mh-cart .mh-panel-actions{ position: static !important; box-shadow: none !important; }

/* Avoid content overflow in grid children */
.mh-field, .mh-row-2, .mh-row-3 { min-width: 0 !important; }
</style>


<style>
/* v1.7.18 â€” raise z-index, ensure pointer events, and keep buttons side-by-side */
#mh-floating{ z-index: 10050 !important; pointer-events: auto !important; }
#mh-floating .mh-fab, #mh-floating #mh-cart-fab{ pointer-events: auto !important; }
.mh-cart, .mh-panel{ z-index: 10040 !important; } /* below buttons but above content */
</style>


<style>
/* v1.7.19 â€” mobile follow-scroll + fix button text wrapping */
#mh-floating{
  /* default (desktop) stays absolute; JS will flip to fixed on small screens */
  display: inline-flex !important;
  gap: 8px !important;
  justify-content: flex-end !important;
  align-items: center !important;
  width: auto !important;
  max-width: none !important;
}
#mh-floating .mh-fab, #mh-floating #mh-cart-fab{
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  height: 44px !important;
  padding: 8px 12px !important;
  white-space: nowrap !important;    /* avoid Chinese character wrapping like "è³¼ç‰©
è»Š" */
  line-height: 1 !important;
  min-width: fit-content !important;
}

/* drawers default styles remain from previous versions; add a shell class for fixed mode alignment */
.mh-cart, .mh-panel{
  will-change: left, right, bottom, width, transform;
}

/* Utilities toggled by JS */
:root.fixed-drawer #mh-floating{ position: fixed !important; }
:root.fixed-drawer .mh-cart, :root.fixed-drawer .mh-panel{ position: fixed !important; }
</style>


<style>
/* v1.7.26 â€” safety: border-box so borders/padding don't push width */
.mh-cart, .mh-panel { box-sizing: border-box !important; }
</style>


<style>
/* v1.7.29 â€” Drawer row spacing = 3px (uniform) */
.mh-panel-body > .mh-field,
.mh-panel-body > .mh-row-2,
.mh-panel-body > .mh-row-3 { margin-bottom: 3px !important; }

/* Grid rows inside the drawer: both axes 3px */
.mh-row-2, .mh-row-3 {
  gap: 3px !important;
  row-gap: 3px !important;
  column-gap: 3px !important;
}

/* Cart list and items spacing */
.mh-cart-list { gap: 3px !important; row-gap: 3px !important; }
.mh-cart-item { gap: 3px !important; }
</style>


<style>
/* v1.7.30 â€” ensure 3px vertical rhythm inside .mh-panel-body */
.mh-panel-body { row-gap: 3px !important; }
</style>


<style>
/* v1.7.32 â€” Vertical spacing = 0.5px in both drawers (panel & cart) */
.mh-panel-body { row-gap: 0.5px !important; } /* when body is grid on some views */

/* Direct children (block layout fallback) */
.mh-panel-body > .mh-field,
.mh-panel-body > .mh-row-2,
.mh-panel-body > .mh-row-3 { margin-bottom: 0.5px !important; }

/* Only adjust vertical gaps inside grid rows; keep existing column gaps */
.mh-row-2, .mh-row-3 { row-gap: 0.5px !important; }

/* Cart list: reduce vertical distance between items only */
.mh-cart-list { row-gap: 0.5px !important; }
</style>


<style>
/* v1.7.56 â€” è³¼ç‰©è»Šæ¸…å–®æ”¹ç‚ºå…§éƒ¨å·è»¸ï¼Œé˜²æ­¢çªç ´ç•«é¢ï¼›æ¨™é¡Œå¸é ‚ï¼›å‹•ä½œå€å›ºå®šåœ¨åº•éƒ¨ */
.mh-cart{ 
  display: flex !important; 
  flex-direction: column !important; 
  max-height: var(--mh-cart-max, 70vh) !important; 
  overflow: hidden !important; 
}
.mh-cart h4{ 
  position: sticky !important; 
  top: 0; 
  background: var(--mh-cart-bg); 
  z-index: 2; 
  padding-top: 6px; 
  padding-bottom: 6px;
}
.mh-cart-list{ 
  flex: 1 1 auto !important; 
  min-height: 0 !important; 
  overflow: auto !important; 
  -webkit-overflow-scrolling: touch !important; 
  max-height: var(--mh-cart-list-max, 60vh) !important; 
}
/* ä¿ç•™åŸæœ‰ç¸½è¨ˆèˆ‡æ¬„ä½ã€å‹•ä½œå€å¡Šåœ¨åº•éƒ¨ï¼Œä¸åƒèˆ‡æ»¾å‹•é«˜åº¦è¨ˆç®— */
.mh-cart .mh-total,
.mh-cart .mh-field,
.mh-cart .mh-panel-actions{
  flex: 0 0 auto !important;
}
/* å°è¢å¹•ï¼šé«˜åº¦çµ¦æ›´é«˜ä¸€é»ï¼Œä½†ä»ä»¥å…§éƒ¨æ¸…å–®æ»¾å‹•ç‚ºä¸» */
@media (max-width:1023.98px){
  .mh-cart{ max-height: var(--mh-cart-max, 80vh) !important; }
}
</style>


<style>
/* v1.7.56 â€” æ‰‹æ©Ÿéå…¨è¢å¹•ï¼šè®“ã€Œè¨‚å–®æ¸…å–® + ä¸‹æ–¹è¡¨å–®ã€å…±ç”¨åŒä¸€å±¤å·è»¸ */
/* 1) ç”± .mh-cart ä½œç‚ºå”¯ä¸€çš„æ»¾å‹•å®¹å™¨ï¼›æ¨™é¡Œå¸é ‚ï¼›å…¶é¤˜çš†åœ¨åŒä¸€å±¤å…§æ²å‹• */
.mh-cart{
  display:flex !important;
  flex-direction:column !important;
  max-height: var(--mh-cart-max, 80vh) !important;
  overflow: auto !important;            /* é—œéµï¼šå¤–å±¤æ»¾å‹• */
  -webkit-overflow-scrolling: touch !important;
}
.mh-cart h4{
  position: sticky !important;
  top: 0;
  background: var(--mh-cart-bg);
  z-index: 2;
  padding-top: 6px;
  padding-bottom: 6px;
}

/* 2) æ¸…å–®å€ä¸å†è‡ªå¸¶æ»¾å‹•ï¼Œæ”¹ç‚ºéš¨å¤–å±¤ä¸€èµ·æ²å‹• */
.mh-cart-list{
  overflow: visible !important;
  max-height: none !important;
  min-height: 0 !important;
  flex: 0 0 auto !important;
}

/* 3) å…¶é¤˜å€å¡Šçš†åœ¨åŒä¸€å±¤å…§æ’åˆ—ï¼Œé¿å…ã€Œåªçœ‹åˆ°ç¸½è¨ˆã€çš„éŒ¯è¦º */
.mh-cart .mh-total,
.mh-cart .mh-field,
.mh-cart .mh-panel-actions{
  flex: 0 0 auto !important;
}

/* å°è¢å¹•é«˜åº¦ç¨æ”¾å¯¬ */
@media (max-width:1023.98px){
  .mh-cart{ max-height: var(--mh-cart-max, 85vh) !important; }
}
</style>


<style>
/* v1.7.56 â€” å¤–å±¤å–®ä¸€å·è»¸ + æ¨™é¡Œå¸é ‚ */
.mh-cart{
  display:flex !important;
  flex-direction:column !important;
  max-height: var(--mh-cart-max, 85vh) !important;
  overflow:auto !important;
  -webkit-overflow-scrolling: touch !important;
}
.mh-cart h4{
  position: sticky !important;
  top: 0;
  background: var(--mh-cart-bg);
  z-index: 2;
  padding-top: 6px;
  padding-bottom: 6px;
}
.mh-cart-list{
  overflow: visible !important;
  max-height: none !important;
  min-height: 0 !important;
  flex: 0 0 auto !important;
}
.mh-cart .mh-total,
.mh-cart .mh-field,
.mh-cart .mh-panel-actions{
  flex: 0 0 auto !important;
}
</style>

<style>
/* === v1.7.57 â€” Cart actions fixed at bottom; middle scroll only === */
.mh-cart{
  display: flex !important;
  flex-direction: column !important;
  max-height: 85vh !important;
  overflow: hidden !important;
}

.mh-cart-list{
  flex: 1 1 auto !important;
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch !important;
}

.mh-cart .mh-panel-actions{
  flex: 0 0 auto !important;
  background: #fffdf9 !important;
  border-top: 1px solid #e1d5c7 !important;
}
</style>
<style>
/* === v1.7.58 â€” Cart header + footer both fixed; middle scroll only === */
.mh-cart{
  display: flex !important;
  flex-direction: column !important;
  max-height: 85vh !important;
  overflow: hidden !important;
}

/* Header stays fixed (top) */
.mh-cart h4{
  flex: 0 0 auto !important;
  position: sticky !important;
  top: 0 !important;
  background: var(--mh-cart-bg) !important;
  z-index: 3 !important;
}

/* Middle scroll area */
.mh-cart-list{
  flex: 1 1 auto !important;
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch !important;
}

/* Footer actions fixed at bottom */
.mh-cart .mh-panel-actions{
  flex: 0 0 auto !important;
  background: #fffdf9 !important;
  border-top: 1px solid #e1d5c7 !important;
  z-index: 3 !important;
}
</style>
<style>
/* === v1.7.59 â€” Correct scroll container: keep cart scrollable, freeze header & footer === */

/* 1. Cart itself MUST scroll (restore scrollbar) */
.mh-cart{
  display: flex !important;
  flex-direction: column !important;
  max-height: 85vh !important;
  overflow-y: auto !important;   /* é—œéµï¼šæ¢å¾©æ»¾è¼ª */
  overflow-x: hidden !important;
  -webkit-overflow-scrolling: touch !important;
}

/* 2. Header frozen at top */
.mh-cart h4{
  position: sticky !important;
  top: 0 !important;
  background: var(--mh-cart-bg) !important;
  z-index: 5 !important;
}

/* 3. Footer frozen at bottom */
.mh-cart .mh-panel-actions{
  position: sticky !important;
  bottom: 0 !important;
  background: #fffdf9 !important;
  border-top: 1px solid #e1d5c7 !important;
  z-index: 5 !important;
}

/* 4. Middle content flows naturally inside the same scroll */
.mh-cart-list{
  overflow: visible !important;
  flex: 0 0 auto !important;
}
</style>
</head>
<body>

<section style="position: relative; display: flex; flex-wrap: wrap; justify-content: center; gap: 2em; padding: 2em 1em; font-size: 1.05rem; line-height: 1.6; background: #fffefb; max-width: 1280px; margin: auto;">
  <!-- å·¦é ï¼šåº—å®¶è³‡è¨Š -->
  <div style="flex: 1 1 320px; background: #fffbe7; padding: 1.5em; border-radius: 8px 0 0 8px; box-shadow: -4px 4px 12px rgba(0,0,0,0.08); z-index: 2;">
    <h2 style="color: #e65100;">
     èŒè™ç‡’   <img src="https://github.com/menghushao/MENU/blob/main/%E5%8E%9F%E5%A7%8B%E8%99%8E%E9%A0%AD(%E5%8E%BB%E8%83%8C).png?raw=true" alt="logo" style="width: 1.2em; height: 1.2em; vertical-align: middle; margin-right: 0.3em; border-radius: 3px;">
      åº—å®¶è³‡è¨Š
    </h2>
    <p><strong>åœ°å€ï¼š</strong><a href="https://maps.app.goo.gl/B6KTsppsNF3jqvfC9" target="_blank">è‹—æ —å¸‚ä¸­å±±è·¯203è™Ÿ</a><br><em>å–®å‘é›™ç·šé“ï¼Œæ±½è»Šåœè»Šä½è¨­ç½®åœ¨å³å´ï¼Œæˆ‘å€‘åœ¨å·¦å´ï¼Œæ©Ÿ/è…³è¸è»Šå¯ä»¥åœåœ¨é¨æ¨“(æš«æ™‚)ã€‚</em></p>
    <p><strong>é›»è©±ï¼š</strong>
      <a href="tel:0912457104" style="color: inherit; text-decoration: underline;">0912457104<em>  (æ‹’æ¥éš±è—ä¾†é›»è™Ÿç¢¼)</em></a>
    </p>
    <p><strong>å®˜æ–¹LINEï¼š</strong>
      <a href="https://reurl.cc/qZAE2y" target="_blank" style="margin-left: 0.5em;">
        <img src="https://pic.pimg.tw/softwarecenter/1405438113-157016513.png" alt="LINE" style="width: 1.6em; vertical-align: middle;">
      </a><em>   (å›è¦†é€Ÿåº¦è¼ƒå¿«)</em>
    </p>
    <p><strong>å®˜ æ–¹ F B ï¼š  </strong>
      <a href="https://m.me/menghushao" target="_blank" style="margin-left: 0.5em;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="FB" style="width: 1.4em; vertical-align: middle;">
      </a>
    </p>
    <p><strong>ç‡Ÿæ¥­æ™‚é–“ï¼š</strong><br><em>é€±æ—¥å›ºå®šä¼‘æ¯<br>é€±ä¸€ ~ äº” çš„11:00 ~ 22:00<br>é€±å…­ çš„10:00 ~ 23:59</em></p>
    <p><strong>è‡¨æ™‚ä¼‘æ¯æ—¥ï¼š<br></strong><em style="color: red;">10/30(å››)ã€11/01(å…­)</em></p>
    <p><strong>Wi-Fi å¯†ç¢¼ï¼š</strong>0912457104</p>
    <p>ğŸ“„ æœ‰çµ±ç·¨ç« å¯ä¾›å…¬å¸è¡Œè™Ÿæ ¸éŠ·é»å¿ƒè²»ç”¨ï¼Œå¯ä½¿ç”¨ç¾é‡‘ã€LINEPAYã€å…¨æ”¯ä»˜çµå¸³ã€‚</p>
    <p>â±ï¸ é¤é»éƒ½æ˜¯ç¾é»ç¾åšï¼Œå¯é€éé›»è©±æˆ–é€šè¨Šè»Ÿé«”æå‰é è¨‚ï¼Œé¿å…ç¾å ´ç­‰å¾…ã€‚<br>ğŸ•“ è‹¥æœ‰ç‡Ÿæ¥­æ™‚é–“å¤–çš„è¨‚å–®éœ€æ±‚ï¼Œå¯ä»¥æå‰è·Ÿè€é—†è¯ç¹«å•†é‡ã€‚</p>
    <p>
  ğŸ›µ æ»¿300å…ƒè‹—æ —å¸‚é–€ç‰Œå¯å¤–é€ï¼Œä¸æ»¿å¯é€é
  <a href="https://www.ubereats.com/tw/store/%E8%90%8C%E8%99%8E%E7%87%92-%E7%94%9C%E9%BB%9E-%E4%B8%8B%E5%8D%88%E8%8C%B6-%E9%BB%9E%E5%BF%83-%E9%9B%9E%E8%9B%8B%E7%B3%95/C-zADMIpWq-_9Pep-1uOVQ?diningMode=DELIVERY&amp;sc=SEARCH_SUGGESTION" target="_blank">UBER Eats</a>
  é»é¤ï¼Œå¸‚å¤–å»ºè­°é€é
  <a href="https://maps.app.goo.gl/B6KTsppsNF3jqvfC9" target="_blank">GOOGLEåœ°åœ–</a>
  é¿é–‹æ”¶è²»è·¯æ®µï¼Œå–å¾—èˆ‡èŒè™ç‡’çš„è·é›¢ (å…¬é‡Œ)ï¼Œå†å¡«å…¥ä¸‹æ–¹æ¬„ä½ä¼°ç®—ä¿é€é–€æª»ã€‚
  <input type="number" id="distanceInput" min="0" step="0.1" style="width: 5em; margin-left: 0.3em;">
  <span id="deliveryMsg" style="margin-left: 0.5em; color: #d32f2f;"></span></p><p style="color: red;">ï¼ˆå¤–é€é‡å¤§è«‹è‡³å°‘å‰ä¸€å¤©èˆ‡è€é—†è¯ç¹«ï¼Œé¿å…ä½¿ç”¨å¤–é€å¹³å°ï¼Œå¦å‰‡æ¥µæœ‰å¯èƒ½å› ç‚ºå‚™æ–™ä¸è¶³ç„¡æ³•æ‰¿æ¥ï¼‰</p>
<p></p>
    <script>
      const distanceInput = document.getElementById("distanceInput");
      const deliveryMsg = document.getElementById("deliveryMsg");
      distanceInput?.addEventListener("input", () => {
        const km = parseFloat(distanceInput.value) || 0;
        const fullKM = Math.ceil(km);
        let amount = 0;
        if (fullKM <= 3) amount = 300;
        else if (fullKM <= 15) amount = 300 + (fullKM - 3) * 100;
        else amount = 300 + (fullKM - 3) * 150;
        deliveryMsg.textContent = `éœ€æ»¿ ${amount} å…ƒï¼Œè«‹å…ˆè¯ç¹«åº—å®¶è©•ä¼°`;
      });
    
// v1.7.56 â€” Fix: Step3 cross-item combine by same price; summary text fixed.
</script>
    <p>ğŸš« æˆ‘å€‘ã€Œä¸ã€æä¾›å¡‘è† è¢‹å’Œå¸ç®¡ï¼Œé›è›‹ç³•å–®æ¬¡æ¶ˆè²»æ»¿5ä»½ï¼Œæœƒæä¾›ä¸€å€‹ä¸ç¹”å¸ƒæç¶²ï¼Œæ»¿12ä»½å†åŠ è´ˆèŒè™ä¸ç¹”å¸ƒæè¢‹ï¼Œå¤–é€é‡å¤§æœƒä½¿ç”¨äºŒæ‰‹ä½†ä¹¾æ·¨çš„ç´™ç®±ã€‚</p>
<p>ğŸŸï¸å–®æ¬¡æ¶ˆè²»æ»¿60å…ƒå¯ç²å¾—é›†é»å¡1é»ï¼Œé¤é»æ»¿6ä»½é»æ•¸é›™å€ï¼Œæ»¿12ä»½ç›´æ¥æŠ˜æŠµ1ä»½ï¼Œé»æ•¸æ”¹è´ˆ1é»ã€‚é›†æ»¿10é»å¯å…Œæ›ä»»ä½•å£å‘³é›è›‹ç³•1ä»½ã€‚</p>
    <p>âš ï¸ å¶æœ‰éºµç³Šæ²’å®Œå…¨ç†Ÿé€çš„æƒ…æ³ï¼Œé€™ç„¡æ³•å®Œå…¨é¿å…ï¼Œè‹¥ç™¼ç”Ÿäº†è«‹å‘Šè¨´æˆ‘å€‘ï¼Œæˆ‘å€‘å°‡ç›´æ¥é€€å›é¤é»è²»ç”¨ã€‚</p>
    <p>ğŸ›ï¸ <a href="https://reurl.cc/Aym5rE" target="_blank">[èŒè™ç‡’-çŸ³è™å°è²“è²“] LINE è²¼åœ–</a></p>
  </div>
  <!-- å³é ï¼šèœå–®èˆ‡é»é¤ -->
  <div id="menu-root" data-menu="" style="flex: 1 1 640px; background: #fff; padding: 1.5em; border-radius: 0 8px 8px 0; box-shadow: 4px 4px 12px rgba(0,0,0,0.08); z-index: 2;">
   <li><em>éœœæ·‡æ·‹ç”±æ–¼å®¢æµé‡ä¸é«˜ï¼Œæ‰€ä»¥å¤šæ•¸éƒ½æ˜¯å€’æ‰ï¼Œç‚ºé¿å…æµªè²»æ•…æš«æ™‚ä¸æœƒè²©å”®ã€‚<br>è‹¥å°æ©Ÿå™¨æœ‰èˆˆè¶£ï¼Œå¯ä»¥è·Ÿè€é—†è¯ç¹«å•†è«‡ã€‚</em></li>
 <h2 style="color: #e65100;">ğŸ£ é›è›‹ç³• Fluffy Egg Cakes <span style="font-size: 1rem; color: #000;">è‡ªå‚™å®¹å™¨é›†é»å¡åŠ è´ˆ1é»ï¼</span></h2>
<p><strong style="color: red;">ä¸€ä»½ 2 é¡†è£ä¸€è¢‹</strong>ï¼Œå¯æ··æ­ä¸åŒå£å‘³ã€‚(è«‹ä»¥ä»½ç‚ºå–®ä½é»é¤)</p>

<!-- ç´”é›è›‹ç³• -->
<p><strong>ç´”é›è›‹ç³• Original</strong>ï¼š<em>åªæœ‰è›‹ç³•é«” &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em> <br> 2é¡† 20å…ƒï¼Œæ­<strong style="color:#4caf50;">å–®é¤¡</strong>25å…ƒã€æ­<strong style="color:#ff9800;">é›™é¤¡</strong>30å…ƒ</p>

<!-- å–®é¤¡èˆ‡é›™é¤¡ä¸¦æ’ -->
<div style="display: flex; gap: 40px; flex-wrap: wrap;">
  <!-- å–®é¤¡ -->
  <div style="flex: 1; min-width: 250px;">
    <h3 style="color: #4caf50;">å–®é¤¡é›è›‹ç³• Single Filling (creamy)</h3>
    <p>2é¡† 30å…ƒï¼Œæ­<strong>ç´”é›è›‹ç³•</strong>25å…ƒã€æ­<strong style="color:#ff9800;">é›™é¤¡</strong>35å…ƒ</p>
    <ol>
      <li>å·§å…‹åŠ› chocolate</li>
      <li>å¥¶æ²¹ Milk</li>
      <li>é¹¹è›‹é»ƒ Savory Egg Yolk</li>
      <li>æŠ¹èŒ¶ Matcha</li>
      <li>ç´…è±† Red Bean</li>
      <li>èŠéº» Sesame</li>
      <li>è’œé¦™ Garlic</li>
      <li>æ¢…å­èŠ±ç”Ÿ Plum Peanuts</li>
      <li>è‰è“ Strawberry</li>
    </ol>
  </div>

  <!-- é›™é¤¡ -->
  <div style="flex: 1; min-width: 250px;">
    <h3 style="color: #ff9800;">é›™é¤¡é›è›‹ç³• Dual Filling (creamy)</h3>
    <p>2é¡† 35å…ƒï¼Œæ­<strong>ç´”é›è›‹ç³•</strong>30å…ƒã€æ­<strong style="color:#4caf50;">å–®é¤¡</strong>35å…ƒ</p>
    <ol>
      <li>å¥¶æ²¹é¹¹è›‹ Milk &amp; Savory Egg Yolk</li>
      <li>é›™è‰²ä¹³é…ª Cheddar &amp; Mozzarella</li>
      <li>æŠ¹èŒ¶ç´…è±† Matcha &amp; Red Bean</li>
      <li>æŠ¹èŒ¶å·§å…‹åŠ› Matcha &amp; Chocolate</li>
      <li>èŠéº»å·§å…‹åŠ› Sesame &amp; Chocolate</li>
      <li>èŠ±ç”Ÿå·§å…‹åŠ› Plum Peanuts &amp; Chocolate</li>
      <li>ç‰ç±³æ¿ƒæ¹¯ Corn Chowder</li>
    </ol>
  </div>
</div>
    <hr style="margin: 2em 0;">

    <h2 style="color: #00796b;">ğŸ§‹ é£²å“Drink<span style="font-size: 1rem; color: #000;">å¤–å¸¶è‡ªå‚™æ‚²åŠ‡æŠ˜ 10 å…ƒï¼</span></h2>
    <p>ç”œåº¦ç„¡æ³•èª¿æ•´ï¼Œå†°å¡Šå¯èª¿æ•´ã€‚</p>
   <style>
  ul.drink-list {
    display: flex;
    flex-wrap: wrap;
    gap: 2em; /* æ§åˆ¶é …ç›®é–“è· */
    padding-left: 1.2em; /* ä¿ç•™åœ“é»ç¸®æ’ */
  }

  ul.drink-list li {
    list-style-type: disc; /* ä¿ç•™åœ“é» */
    width: auto;
    min-width: 200px; /* å¯ä¾éœ€è¦èª¿æ•´ */
  }
</style>

<ul class="drink-list">
  <li><strong>1.å†¬ç“œèŒ¶Winter Melon (with Brown Sugar)</strong>ï¼š<br>å¤–å¸¶Take Out 480mL 25å…ƒ ï¼ å…§ç”¨Dine In 240mL 10å…ƒ</li>
  <li><strong>2.å†¬ç“œæª¸æª¬<strong style="color: red;">(ç›®å‰åœä¾›)</strong>Winter Melon &amp; lemon (with Brown Sugar)</strong>ï¼š<br>å¤–å¸¶Take Out 480mL 30å…ƒ ï¼ å…§ç”¨Dine In 240mL 15å…ƒ</li>
  <li><strong>3.å†¬ç“œç´«è˜‡æ¢…Winter Melon &amp; Salted Plum(with Brown Sugar)</strong>ï¼š<br>å¤–å¸¶Take Out 480mL 35å…ƒ ï¼ å…§ç”¨Dine In 240mL 20å…ƒ</li>
  <li><strong>4.å†¬ç“œé®®å¥¶Winter Melon &amp; milk(with Brown Sugar)</strong>ï¼š<br>å¤–å¸¶Take Out 480mL 45å…ƒ ï¼ å…§ç”¨Dine In 240mL 25å…ƒ</li>
  <li><strong>5.ç‡’ä»™è‰<strong style="color: red;">(ä¾›æ‡‰ä¸­)</strong>Sweet Hot Grass Jelly Soup</strong>ï¼š<br>å¤–å¸¶Take Out 480mL 40å…ƒï¼ å…§ç”¨Dine In 240mL 20å…ƒ</li>
</ul>

    <hr style="margin: 2em 0;">

    <h2 style="color: #6d4c41;">â˜• å’–å•¡coffee<span style="font-size: 1rem; color: #000;">å¤–å¸¶è‡ªå‚™æ‚²åŠ‡æŠ˜ 10 å…ƒï¼</span></h2>
    <p>é¢¨å‘³ç‚ºé¦™æ°£å‘ˆç¾ï¼Œå…¨ç„¡ç³–ã€ä¸æä¾›ç³–ï¼Œå†°ï¼ç†±å¯èª¿ã€‚<br>Flavor is expressed through aroma. No sugar is added or provided. Available hot or iced.</p>

    <p><strong>å…ˆé¸é¢¨å‘³ï¼šStep 1: Choose Your Flavor</strong></p>
    <ul>
      <li>1.ç¶“å…¸Classicï¼ˆçƒ˜ç„™ 33%ï¼Œå’–å•¡å›  75mgï¼‰</li>
      <li>2.ä½å› ç¶“å…¸Classic Decafï¼ˆçƒ˜ç„™ 33%ï¼Œå’–å•¡å›  2mgï¼‰</li>
      <li>3.é¦™è‰Vanillaï¼ˆçƒ˜ç„™ 58%ï¼Œå’–å•¡å›  68mgï¼‰</li>
      
      <li>4.èŠ±æœFloral &amp; Fruityï¼ˆçƒ˜ç„™ 16%ï¼Œå’–å•¡å›  69mgï¼‰</li>
      <li>5.èƒ¡æ¤’Spicyï¼ˆçƒ˜ç„™ 75%ï¼Œå’–å•¡å›  55mgï¼‰</li>
    </ul>

    <p><strong>å†é¸ä½œæ³•ï¼šStep 2: Choose Your Style</strong></p>
    <ul>
      <li><strong>1.ç¾å¼Americano</strong>ï¼š<br>å…§ç”¨Dine In 240mL 35å…ƒ ï¼ å¤–å¸¶Take Out 480mL 60å…ƒ</li>
      <li><strong>2.æ‹¿éµCaffÃ¨ Latte</strong>ï¼š<br>å…§ç”¨Dine In 240mL 55å…ƒ ï¼ å¤–å¸¶Take Out 480mL 95å…ƒ</li>
      <li><strong>èŒç¿»æ‹¿éµ</strong>ï¼š<br>240mL  65å…ƒ ï¼ˆé™å®šå…§ç”¨ï¼‰
        <br><em>å¥¶æ³¡ç‘ä¸Šä¸€éš»èŒè™å·§å…‹åŠ›ç²‰åœ–æ¡ˆã€‚ç‘æˆåŠŸæ˜¯èŒç¿»æ‹¿éµï¼Œå¤±æ•—å°±æ˜¯æ†¨ç¿»æ‹¿éµï¼Œè€é—†ä¸æœƒé‡åšä¸€æ¯ä½†æœƒå°‘æ”¶10å…ƒï¼Œæ‰€ä»¥è¦ªæ„›çš„èŒå‹å€‘è¦æ‰¿æ“”ä¸€é»çœ‹åˆ°æ†¨è‡‰çš„é¢¨éšª</em> ğŸ¯ğŸ’¥
      </li>
    </ul>

    </div>
</section>

<!-- âœ… ç€è¦½äººæ¬¡å€å¡Šï¼šä½¿ç”¨ vercount.oneï¼Œç©©å®šé¡¯ç¤ºäººæ¬¡ -->
<div style="text-align: center; margin: 2em 0; font-size: 14px;">
  ğŸ¾ ä¾†è¨ªèŒå‹ç¬¬ <span id="busuanzi_value_site_pv">è¼‰å…¥ä¸­...</span> ä½ï¼
</div>

<script async="" src="https://vercount.one/js"></script>

  





<!-- === é»é¤ / è³¼ç‰©è»Š v1.7.5 === -->
<button id="mh-fab" class="mh-fab" title="æ‰“é–‹é»é¤é¢æ¿">ğŸ§¾ é»é¤</button>
<button id="mh-cart-fab" title="é–‹å•Ÿè³¼ç‰©è»Š">ğŸ›’ è³¼ç‰©è»Š<span id="mh-cart-fab-badge">0</span></button>

<aside id="mh-cart" class="mh-cart" aria-label="è³¼ç‰©è»Š">
  <h4>è³¼ç‰©è»Š <small id="mh-cart-count" class="mh-badge">0</small> <button id="mh-cart-close" class="mh-close">æ”¶åˆ</button></h4>
  <div id="mh-cart-list" class="mh-cart-list"></div>
  <div id="mh-cart-empty" class="mh-cart-empty">å°šç„¡å“é …</div>

  <div class="mh-total" id="mh-summary">
    <div id="mh-summary-line">è¨‚å–®é‡‘é¡ â€” å…ƒï¼›æ»¿ä»½æŠ˜ 0 ä»½ 0 å…ƒï¼›çµå¸³é‡‘é¡ â€” å…ƒï¼›é»æ•¸ç™¼æ”¾ â€” é»</div>
  </div>

  <div class="mh-field"><label for="mh-when">å–é¤/é€é”æ™‚é–“ï¼ˆå¯ç•™ç©ºï¼‰</label><input id="mh-when" type="datetime-local" class="mh-input"></div>
  <div class="mh-field"><label for="mh-addr">å¤–é€åœ°å€ï¼ˆç•™ç©ºï¼åˆ°åº—å–é¤ï¼‰</label><input id="mh-addr" type="text" class="mh-input" placeholder="è‹—æ —å¸‚..."></div>
  <div class="mh-row-2">
    <div class="mh-field"><label for="mh-sign">æ‹›ç‰Œ</label><input id="mh-sign" type="text" class="mh-input" placeholder="æŸæŸæ©Ÿé—œã€å–®ä½"></div>
    <div class="mh-field"><label for="mh-name">ç¨±å‘¼</label><input id="mh-name" type="text" class="mh-input" placeholder="æŸå…ˆç”Ÿ / å°å§"></div>
  </div>
  <div class="mh-field"><label for="mh-phone">é›»è©±</label><input id="mh-phone" type="tel" class="mh-input" placeholder="0912-345678"></div>

  <div class="mh-field">
    <label for="mh-channel">é€å‡ºå¾Œæœƒè¤‡è£½è³¼ç‰©è»Šå…§å®¹ï¼Œä¸”è‡ªå‹•é–‹å•Ÿé€šè¨Šè»Ÿé«”ï¼Œè«‹åœ¨é€šè¨Šè»Ÿé«”ä¸­"è²¼ä¸Š"è·Ÿè€é—†è¨‚é¤</label>
    <select id="mh-channel" class="mh-select">
      <option value="LINE|https://reurl.cc/qZAE2y">LINE</option>
      <option value="FB|https://m.me/menghushao">FB</option>
    </select>
  </div>

  <div class="mh-panel-actions">
    <button id="mh-copy" class="mh-btn">è¤‡è£½</button>
    <button id="mh-send" class="mh-btn primary">é€å‡º</button>
    <button id="mh-clear" class="mh-btn">æ¸…ç©º</button>
  </div>
</aside>

<section id="mh-panel" class="mh-panel" aria-hidden="true">
  <div class="mh-panel-head">
    <strong>å»ºç«‹è¨‚å–®å°å¡</strong>
    <button id="mh-close" class="mh-btn">é—œé–‰</button>
  </div>
  <div class="mh-panel-body">
    
<div class="mh-row-2 mh-type-qty">
  <div class="mh-field">
    <label for="mh-type">å“é …</label>
    <select id="mh-type" class="mh-select"><option value="">è«‹é¸æ“‡</option></select>
  </div>
  <div class="mh-field">
    <label for="mh-qty">æ•¸é‡</label>
    <input id="mh-qty" class="mh-number" type="number" min="1" step="1" value="1">
  </div>
</div>

    <div class="mh-row-2">
      <div class="mh-field">
        <label for="mh-a">å•†å“</label>
        <select id="mh-a" class="mh-select"><option value="">å•†å“</option></select>
      </div>
      <div class="mh-field" id="mh-b-wrap">
        <label for="mh-b">å•†å“</label>
        <select id="mh-b" class="mh-select"><option value="">å•†å“</option></select>
      </div>
    </div>
    <div class="mh-field">
      <label class="mh-label">é™„é …ï¼ˆæœ€å¤š 6ï¼‰</label>
      <div class="mh-row-3">
        <select class="mh-select mh-acc"><option value="">é™„</option></select>
        <select class="mh-select mh-acc"><option value="">é™„</option></select>
        <select class="mh-select mh-acc"><option value="">é™„</option></select>
        <select class="mh-select mh-acc"><option value="">é™„</option></select>
        <select class="mh-select mh-acc"><option value="">é™„</option></select>
        <select class="mh-select mh-acc"><option value="">é™„</option></select>
      </div>
    </div>
    <div class="mh-actions-inline">
      <button id="mh-add-inline" class="mh-btn primary">åŠ å…¥è³¼ç‰©è»Š</button>
      <button id="mh-bulk-combo" class="mh-btn">éš¨ä¾¿å•¦!!</button>
      <button id="mh-reset-inline" class="mh-btn">æ¸…ç©º</button>
    </div>
  
</div></section>



<script>
(function(){
  const DATA_URL = "https://raw.githubusercontent.com/menghushao/Order-management-product/main/gridData.plain.json";
  const PAY = "ç¾é‡‘";
  const MONEY_PER_POINT = 60;
  const MAX_LEFTOVER_POINTS = 9;
  const CYCLE_SET = 12;

  // State
  let grid=[], rows=[], typeToItems=new Map(), itemToAccs=new Map();
  let cart=[];
  let editIndex = -1; // <â€” currently editing cart index (-1 = new)

  // DOM shortcuts
  const menuRoot = document.querySelector('#menu-root, main .markdown-body, main, article, .content, .post, .wrap, .container');
  const orderFab = document.getElementById('mh-fab');       // ğŸ§¾ é»é¤
  const cartFab  = document.getElementById('mh-cart-fab');  // ğŸ›’ è³¼ç‰©è»Š
  const cartFabBadge = document.getElementById('mh-cart-fab-badge');
  const panel = document.getElementById('mh-panel');
  const closeBtn = document.getElementById('mh-close');
  const typeSel = document.getElementById('mh-type');
  const aSel = document.getElementById('mh-a');
  const bSel = document.getElementById('mh-b');
  const bWrap = document.getElementById('mh-b-wrap');
  const accSelects = Array.from(document.querySelectorAll('.mh-acc'));
  const qtyInput = document.getElementById('mh-qty');
  const addInline = document.getElementById('mh-add-inline');
  const resetInline = document.getElementById('mh-reset-inline');

  const cartEl = document.getElementById('mh-cart');
  const cartList = document.getElementById('mh-cart-list');
  const cartEmpty = document.getElementById('mh-cart-empty');
  const cartCount = document.getElementById('mh-cart-count');
  const clearBtn = document.getElementById('mh-clear');
  const summaryLine = document.getElementById('mh-summary-line');

  const whenInput = document.getElementById('mh-when');
  const addrInput = document.getElementById('mh-addr');
  const signInput = document.getElementById('mh-sign');
  const nameInput = document.getElementById('mh-name');
  const phoneInput = document.getElementById('mh-phone');
  const channelSel = document.getElementById('mh-channel');
  const copyBtn = document.getElementById('mh-copy');
  const sendBtn = document.getElementById('mh-send');

  // Desktop placement
  function placeAtMenuEdge(el, top){
    const rect = menuRoot?.getBoundingClientRect?.();
    if (rect && window.matchMedia('(min-width:1024px)').matches){
      el.style.left = (rect.right + 12) + 'px';
      el.style.top = (top||14) + 'px';
      el.style.right='auto'; el.style.bottom='auto'; el.style.transform='none'; el.style.position='fixed';
    }
  }
  function placeDesktop(){
    if (!window.matchMedia('(min-width:1024px)').matches) return;
    placeAtMenuEdge(orderFab, 14);
    placeAtMenuEdge(cartFab, 58);
    placeAtMenuEdge(cartEl, 64);
  }
  window.addEventListener('resize', placeDesktop);
  window.addEventListener('scroll', placeDesktop);

  // Toggle panel & cart
  function openPanel(){ panel.classList.add('open'); panel.setAttribute('aria-hidden','false'); }
  function closePanel(){ panel.classList.remove('open'); panel.setAttribute('aria-hidden','true'); }
  function toggleCart(force){
    if (typeof force==='boolean'){ cartEl.classList.toggle('open', force); }
    else { cartEl.classList.toggle('open'); }
    if (window.matchMedia('(min-width:1024px)').matches && cartEl.classList.contains('open')){ placeDesktop(); }
  }
  orderFab.addEventListener('click', openPanel);
  closeBtn.addEventListener('click', closePanel);
  cartFab.addEventListener('click', ()=> toggleCart());
  document.getElementById('mh-cart-close')?.addEventListener('click', ()=> toggleCart(false));

  // Helpers
  function opt(label,value){ const o=document.createElement('option'); o.textContent=label; o.value=(value??label); return o; }
  function uniq(a){ return [...new Set(a.filter(Boolean))]; }
  function is2D(x){ return Array.isArray(x)&&x.every(r=>Array.isArray(r)); }
  function normalize(data){ if(is2D(data)) return data; if(data&&is2D(data.data)) return data.data; if(data&&is2D(data.grid)) return data.grid; if(data&&is2D(data.values)) return data.values; throw new Error("è³‡æ–™æ ¼å¼éŒ¯èª¤"); }

  function buildMaps(){
    rows = grid.slice(10, 106);
    typeToItems.clear(); itemToAccs.clear();
    for(const r of rows){
      const type=(r?.[0]||'').trim(), item=(r?.[1]||'').trim();
      if(!type||!item) continue;
      if(!typeToItems.has(type)) typeToItems.set(type, []);
      typeToItems.get(type).push(item);
      const accs = uniq((r.slice(5,15)||[]).map(x=> (x||'').toString().trim()).filter(Boolean));
      if(accs.length) itemToAccs.set(item, accs);
    }
    for(const [k,v] of typeToItems.entries()) typeToItems.set(k, uniq(v));
  }
  function fillType(){ typeSel.innerHTML=''; typeSel.append(opt('è«‹é¸æ“‡','')); [...typeToItems.keys()].forEach(t=> typeSel.append(opt(t,t))); }
  function fillAB(type){
    const items = typeToItems.get(type)||[];
    aSel.innerHTML=''; bSel.innerHTML=''; aSel.append(opt('å•†å“','')); bSel.append(opt('å•†å“',''));
    items.forEach(i=>{ aSel.append(opt(i,i)); bSel.append(opt(i,i)); });
    if(type==='é›è›‹ç³•'){ bWrap.style.display='block'; } else { bWrap.style.display='none'; bSel.value=''; }
    updateAccessoryOptions();
  }
  function updateAccessoryOptions(){
    const finalName = bSel.value || aSel.value || '';
    const options = uniq(itemToAccs.get(finalName)||[]);
    accSelects.forEach(sel=>{
      const keep = sel.value; sel.innerHTML=''; sel.append(opt('é™„','')); options.forEach(x=> sel.append(opt(x,x)));
      if(keep && options.includes(keep)) sel.value = keep;
    });
  }
  typeSel.addEventListener('change', e=> fillAB(e.target.value));
  aSel.addEventListener('change', updateAccessoryOptions);
  bSel.addEventListener('change', updateAccessoryOptions);

  // Price helpers
  function cashPriceForRow(row){ const hdr=(grid[6]||[]).slice(15,30); const idx=hdr.indexOf(PAY); const arr=row.slice(15,30); const v=parseFloat(arr[idx]||0); return isFinite(v)?v:0; }
  function portionSizeForRow(row){ const v=parseFloat(row[30]||0); return (isFinite(v)&&v>0)? v:1; }
  function canJoinFullSet(row){ return ((row[31]||'')+'').trim()==='æ˜¯'; }

  // === Debug Logger (console only) ===
  function promoLog(...args){
    try { console.log('[PROMO]', ...args); } catch(e){}
  }


  // === Promo (website simplified): read rules from grid row0..row2 (all columns) ===
  let promoMap = new Map(); // tag -> {qty, price}
  
  function buildPromoMap(){
    try{
      promoMap.clear();
      const row0 = grid[0] || [];
      const row1 = grid[1] || [];
      const row2 = grid[2] || [];
      const maxLen = Math.max(row0.length, row1.length, row2.length);
      for (let j=0; j<maxLen; j++){
        const tag = ((row0[j] ?? '') + '').trim();
        const qty = parseInt(row1[j], 10) || 0;
        const price = parseFloat(row2[j]) || 0;
        if (!tag) continue;
        if (qty>0 && price>0) promoMap.set(tag, {qty, price});
      }
      const summary = Array.from(promoMap.entries()).map(([k,v])=> `${k} â†’ ${v.qty}ä»½/${v.price}å…ƒ`).join('ï¼› ') || '(ç„¡)';
      promoLog('å·²è¼‰å…¥ç‰¹åƒ¹è¦å‰‡ï¼š', summary);
    }catch(e){
      console.warn('buildPromoMap error:', e);
      promoMap.clear();
    }
  }


  

function applyPromos(portions){

  // New algorithm step 2 is handled in calcTotals (v1.7.56). Keep no-op for legacy calls.
  return portions;

  }

function expandPortions(){

  // New algorithm builds portions directly in calcTotals (v1.7.56). Keep empty output here.
  return [];

  }

  function calcTotals(){

    // === New cart pricing algorithm (v1.7.56) ===
    function itemRowByName(name){
      return rows.find(r => (r?.[1]||'').trim() === name);
    }
    function priceOfRow(row){ return cashPriceForRow(row); }
    function normalUnitsOfRow(row){
      const u = portionSizeForRow(row);
      return (u && u>0) ? u : 1;
    }
    function tagOfRow(row){ return ((row?.[3]||'')+'').trim(); }

    // Step 1: build unit items
    const unitItems = [];
    for (const it of cart){
      const {type,a,b,qty} = it;
      if (type === 'é›è›‹ç³•'){
        const aRow = a ? itemRowByName(a) : null;
        const bRow = b ? itemRowByName(b) : null;
        const aPrice = aRow ? priceOfRow(aRow) : 0;
        const bPrice = bRow ? priceOfRow(bRow) : 0;
        const aTag = aRow ? tagOfRow(aRow) : '';
        const bTag = bRow ? tagOfRow(bRow) : '';
        for (let i=0;i<qty;i++){
          if (a && b){
            unitItems.push({name:a, price:aPrice, tag:aTag});
            unitItems.push({name:b, price:bPrice, tag:bTag});
          } else if (a){
            unitItems.push({name:a, price:aPrice, tag:aTag});
            unitItems.push({name:a, price:aPrice, tag:aTag});
          } else if (b){
            unitItems.push({name:b, price:bPrice, tag:bTag});
            unitItems.push({name:b, price:bPrice, tag:bTag});
          }
        }
      } else {
        const name = a || b || '';
        if (!name) continue;
        const row = itemRowByName(name);
        const price = row ? priceOfRow(row) : 0;
        const tag = row ? tagOfRow(row) : '';
        for (let i=0;i<qty;i++){
          unitItems.push({name, price, tag});
        }
      }
    }

    // Step 2: specials by tag
    const specialPortions = [];
    const normalPool = [];

    const tagRules = new Map(promoMap);
    const tagBuckets = new Map();
    for (const u of unitItems){
      if (u.tag && tagRules.has(u.tag)){
        if (!tagBuckets.has(u.tag)) tagBuckets.set(u.tag, []);
        tagBuckets.get(u.tag).push(u);
      } else {
        normalPool.push(u);
      }
    }
    for (const [tag, arr] of tagBuckets.entries()){
      const rule = tagRules.get(tag);
      if (!rule || !rule.qty || !rule.price){ normalPool.push(...arr); continue; }
      arr.sort((a,b)=> b.price - a.price);
      const groups = Math.floor(arr.length / rule.qty);
      let idx = 0;
      for (let g=0; g<groups; g++){
        const groupSlice = arr.slice(idx, idx + rule.qty);
        idx += rule.qty;
        specialPortions.push({price: rule.price});
        try{ promoLog(`[SPEC] tag=${tag} group=${g+1} => ${rule.qty}ä»½, åƒ¹æ ¼=${rule.price}`); }catch(e){}
      }
      const leftovers = arr.slice(idx);
      if (leftovers.length) normalPool.push(...leftovers);
    }

    // Step 3: normal area grouping
    const normalPortions = [];
    // Bucket by portion size to respect AEï¼ˆ1ä»½çš„æ•¸é‡ï¼‰
    const byPortionSize = new Map(); // key: portionSize(int) -> array of units {price}
    for (const u of normalPool){
      const row = itemRowByName(u.name);
      const portionSize = row ? normalUnitsOfRow(row) : 1;
      if (!byPortionSize.has(portionSize)) byPortionSize.set(portionSize, []);
      byPortionSize.get(portionSize).push({price: u.price});
    }
    for (const [portionSize, units] of byPortionSize.entries()){
      if (portionSize <= 0){
        units.forEach(u => normalPortions.push({price: u.price}));
        continue;
      }
      // 3.1 å…ˆä»¥ç›¸åŒåƒ¹æ ¼ç‚º 1 ä»½å€åˆ†
      const priceBuckets = new Map(); // unitPrice -> count
      units.forEach(u => priceBuckets.set(u.price, (priceBuckets.get(u.price)||0) + 1));
      const remainders = [];
      for (const [unitPrice, cnt] of priceBuckets.entries()){
        const full = Math.floor(cnt / portionSize);
        const rem  = cnt % portionSize;
        for (let i=0;i<full;i++){ normalPortions.push({price: unitPrice * portionSize}); }
        for (let i=0;i<rem;i++){ remainders.push(unitPrice); }
      }
      // 3.2 å°‡å‰©é¤˜çš„ä»¥åƒ¹æ ¼é«˜â†’ä½æ’åºå¾Œå†åˆ†
      remainders.sort((a,b)=> b-a);
      while (remainders.length >= portionSize){
        const grp = remainders.splice(0, portionSize);
        const sum = grp.reduce((s,v)=> s+v, 0);
        normalPortions.push({price: sum});
      }
      // 3.3 è‹¥ä»ä¸è¶³ä»½ï¼Œå°‡å‰©é¤˜å…¨éƒ¨ç•¶ä½œ 1 ä»½ä¾†ç®—ï¼ˆåƒ¹æ ¼=å…¶åŠ ç¸½ï¼‰
      if (remainders.length > 0){
        const sum = remainders.reduce((s,v)=> s+v, 0);
        normalPortions.push({price: sum});
      }
    }
    // Step 4: merge and apply 12th free
    const portions = [...specialPortions, ...normalPortions];
    const pricesDesc = portions.map(p=>p.price).filter(v=>v>0).sort((a,b)=> b-a);
    const totalPortions = pricesDesc.length;
    const orderAmt = pricesDesc.reduce((s,v)=> s+v, 0);
    const discountGroups = Math.floor(totalPortions / 12);
    let discountAmt = 0;
    for (let g=1; g<=discountGroups; g++){
      const idx = g*12 - 1; // 12th, 24th, ...
      discountAmt += pricesDesc[idx];
    }
    try{ promoLog(`[SET] ä»½æ•¸=${totalPortions}ï¼ŒæŠ˜æ‰£çµ„æ•¸=${discountGroups}`); }catch(e){}
    const payAmt = orderAmt - discountAmt;

    const cycles = Math.floor(totalPortions / CYCLE_SET);
    const leftoverPrices = pricesDesc.slice(cycles * CYCLE_SET);
    const leftoverCount = leftoverPrices.length;
    const leftoverAmt = leftoverPrices.reduce((s,p)=> s + p, 0);

    const cyclePoints = cycles * 1;
    let leftoverPoints = Math.floor(leftoverAmt / MONEY_PER_POINT);
    if (leftoverCount >= 6) leftoverPoints = leftoverPoints * 2;
    leftoverPoints = Math.min(MAX_LEFTOVER_POINTS, leftoverPoints);
    const totalPoints = cyclePoints + leftoverPoints;

    return {orderAmt, cycles, discountAmt, payAmt, totalPoints};

  }

  function renderSummary(){
    const {orderAmt, cycles, discountAmt, payAmt, totalPoints} = calcTotals();
    summaryLine.textContent = `è¨‚å–®é‡‘é¡ ${orderAmt.toFixed(0)} å…ƒï¼›æ»¿ä»½æŠ˜ ${cycles} ä»½ ${discountAmt.toFixed(0)} å…ƒï¼›çµå¸³é‡‘é¡ ${payAmt.toFixed(0)} å…ƒï¼›é»æ•¸ç™¼æ”¾ ${totalPoints} é»`;
  }

  function summarizeName(type,a,b,accs){
    let base='';
    if(type==='é›è›‹ç³•'){
      if(a && b) base = [a,b].sort().join('+');
      else if(a && !b) base = a + '+' + a;
      else if(!a && b) base = b + '+' + b;
      else base = '';
    }else{
      base = a || b || '';
    }
    const ext = accs.length ? '('+accs.join('+')+')' : '';
    return base + ext;
  }

  function setSubmitLabel(){ addInline.textContent = (editIndex>=0? 'æ›´æ–°é …ç›®' : 'åŠ å…¥è³¼ç‰©è»Š'); }

  function enterEdit(idx){
    const it = cart[idx]; if (!it) return;
    openPanel();
    typeSel.value = it.type; fillAB(it.type);
    aSel.value = it.a || ''; bSel.value = it.b || ''; updateAccessoryOptions();
    qtyInput.value = it.qty;
    accSelects.forEach((s,i)=> s.value = it.accs?.[i] || '');
    editIndex = idx;
    setSubmitLabel();
  }

  function renderCart(){
    cartCount.textContent = String(cart.length);
    if (cartFabBadge){
      if (cart.length > 0){ cartFabBadge.textContent = String(cart.length); cartFabBadge.style.display='inline-flex'; }
      else { cartFabBadge.style.display='none'; }
    }
    cartList.innerHTML = '';
    if(!cart.length){ cartEmpty.style.display=''; renderSummary(); return; }
    cartEmpty.style.display='none';
    cart.forEach((it, idx)=>{
      const row = document.createElement('div'); row.className='mh-cart-item';
      const title = document.createElement('div'); title.className='mh-name'; title.textContent = `${it.title} Ã— ${it.qty}`;
      const edit = document.createElement('button'); edit.className='mh-edit'; edit.textContent='ç·¨è¼¯';
      edit.addEventListener('click', ()=> enterEdit(idx));
      const del = document.createElement('button'); del.className='mh-del'; del.textContent='åˆªé™¤';
      del.addEventListener('click', ()=>{ cart.splice(idx,1); if (editIndex===idx) editIndex=-1; renderCart(); setSubmitLabel(); });
      row.append(title, edit, del); cartList.appendChild(row);
    });
    renderSummary();
  }

  function resetForm(){
    typeSel.value=''; fillAB(''); qtyInput.value=1; aSel.value=''; bSel.value=''; accSelects.forEach(s=> s.value='');
    editIndex = -1; setSubmitLabel();
  }

  function submitCurrent(){
    const type = typeSel.value.trim();
    const qty = Math.max(1, parseInt(qtyInput.value||'1',10));
    const a = aSel.value.trim(); const b=bSel.value.trim();
    if(!type || (!a && !b)){ alert('è«‹è‡³å°‘é¸æ“‡ã€Œå“é …ã€èˆ‡ã€Œå•†å“ã€å…¶ä¸€ã€‚'); return; }
    const accs = accSelects.map(s => s.value.trim()).filter(Boolean);
    const title = summarizeName(type,a,b,accs);
    const item = { type, qty, a, b, accs, title };
    if (editIndex >= 0){
      cart[editIndex] = item;
      editIndex = -1;
    } else {
      cart.push(item);
    }
    renderCart();
    if (window.matchMedia('(max-width:1023.98px)').matches){ cartEl.classList.add('open'); }
    resetForm();
    setSubmitLabel();
  }

  addInline.addEventListener('click', submitCurrent);
  resetInline.addEventListener('click', resetForm);
  clearBtn.addEventListener('click', ()=>{ cart=[]; renderCart(); resetForm(); });

  // Copy / Send
  function formatDate(dt){ try{ const d=new Date(dt); const y=d.getFullYear(); const m=String(d.getMonth()+1).padStart(2,'0'); const day=String(d.getDate()).padStart(2,'0'); const hh=String(d.getHours()).padStart(2,'0'); const mm=String(d.getMinutes()).padStart(2,'0'); return `${y}/${m}/${day} ${hh}:${mm}`; }catch(e){ return ''; } }
  function orderItemsText(){ return cart.map(it => `${it.title} Ã— ${it.qty}`).join('ï¼›'); }
  function buildMessage(){
    const itemsText = orderItemsText() || 'ï¼ˆå°šæœªé¸æ“‡å•†å“ï¼‰';
    const whenText = whenInput.value ? ` ${formatDate(whenInput.value)}` : '';
    const addr = addrInput.value.trim(), sign=signInput.value.trim(), name=nameInput.value.trim(), phone=phoneInput.value.trim();
    if (addr && sign){
      return `è€é—†ä½ å¥½ï¼Œæˆ‘è¦ ${itemsText} ï¼Œè«‹å¹«æˆ‘å¤–é€åˆ°(${addr})(${sign})(${name})(${phone})` + (whenText? ` è«‹åœ¨${whenText} é€é”`:'') + `ï¼Œè¬è¬ã€‚`;
    } else {
      const who = [name, phone].filter(Boolean).join(' / ');
      return `è€é—†ä½ å¥½ï¼Œæˆ‘è¦ ${itemsText}` + (who? ` ï¼Œ${who}`:'') + (whenText? ` ï¼Œé è¨ˆ${whenText} å–é¤`:'') + `ï¼Œè¬è¬ã€‚`;
    }
  }
  async function copyMessage(alertText){
    const msg = buildMessage();
    try{
      await navigator.clipboard.writeText(msg);
      alert(alertText || 'å·²è¤‡è£½è¨‚å–®ã€‚');
    }catch(e){
      const ta=document.createElement('textarea'); ta.value=msg; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove();
      alert(alertText || 'å·²è¤‡è£½è¨‚å–®ã€‚');
    }
  }
  copyBtn.addEventListener('click', ()=> copyMessage('å·²è¤‡è£½è¨‚å–®å…§å®¹'));
  sendBtn.addEventListener('click', async ()=>{
    await copyMessage('å·²è¤‡è£½è¨‚å–®å…§å®¹ï¼Œç¨å¾Œå°‡è‡ªå‹•é–‹å•Ÿé€šè¨Šè»Ÿé«”ï¼Œè«‹è¦ªæ‰‹è²¼ä¸Šé€å‡ºã€‚');
    const [t,url]=channelSel.value.split('|');
    window.open(url,'_blank');
  });
// Init
  (async function init(){
    try{
      const res = await fetch(DATA_URL, {cache:'no-store'});
      const raw = await res.json(); grid = normalize(raw); buildMaps(); try{ window.mh_typeToItems = new Map(typeToItems); }catch(e){} buildPromoMap(); fillType(); fillAB(''); placeDesktop(); setSubmitLabel(); renderCart();
    }catch(err){ console.error(err); alert('è¼‰å…¥èœå–®è³‡æ–™å¤±æ•—ï¼š' + (err.message||'')); }
  })();
})();
</script>



<script>
// v1.7.13: place order panel right next to the cart (desktop)
(function(){
  const panel = document.getElementById('mh-panel');
  const cartEl = document.getElementById('mh-cart');
  const orderFab = document.getElementById('mh-fab');

  function placePanelNextToCart(){
    if (!panel || !cartEl) return;
    if (!window.matchMedia('(min-width:1024px)').matches) return;
    const r = cartEl.getBoundingClientRect();
    const W = 420;
    let left = r.right + 12; // snug to the cart
    // clamp to viewport
    const maxLeft = Math.max(12, window.innerWidth - W - 12);
    if (left > maxLeft) left = maxLeft;
    panel.style.setProperty('--mh-panel-left', left + 'px');
  }

  // Run when panel opens and on resize/scroll
  const _open = (function(){
    return function(){ panel.classList.add('open'); panel.setAttribute('aria-hidden','false'); placePanelNextToCart(); }
  })();
  // Replace existing openPanel if defined
  if (window.openPanel) {
    window.openPanel = _open;
  } else {
    // fallback hook on é»é¤æŒ‰éˆ•
    orderFab?.addEventListener('click', _open);
  }

  window.addEventListener('resize', ()=>{ if (panel.classList.contains('open')) placePanelNextToCart(); });
  window.addEventListener('scroll', ()=>{ if (panel.classList.contains('open')) placePanelNextToCart(); });
})();
</script>


<script>
// v1.7.14: desktop align panel next to cart and equal height; fix open/close
(function(){
  const panel  = document.getElementById('mh-panel');
  const cartEl = document.getElementById('mh-cart');
  const orderFab = document.getElementById('mh-fab');
  const closeBtn = document.getElementById('mh-close');

  function placePanelToCart(){
    if (!panel || !cartEl) return;
    if (!window.matchMedia('(min-width:1024px)').matches) return;
    const r = cartEl.getBoundingClientRect();
    const left = Math.max(12, Math.min(r.right + 12, window.innerWidth - 420 - 12));
    panel.style.setProperty('--mh-panel-left', left + 'px');
    panel.style.setProperty('--mh-panel-top',  r.top + 'px');
    panel.style.setProperty('--mh-panel-height', r.height + 'px');
  }

  function openPanel(){
    panel.classList.add('open');
    panel.setAttribute('aria-hidden','false');
    placePanelToCart();
  }
  function closePanel(){
    panel.classList.remove('open');
    panel.setAttribute('aria-hidden','true');
  }

  // Wire buttons
  orderFab?.addEventListener('click', openPanel);
  closeBtn?.addEventListener('click', closePanel);

  // Reposition while open
  function maybeReposition(){
    if (panel.classList.contains('open')) placePanelToCart();
  }
  window.addEventListener('resize', maybeReposition);
  window.addEventListener('scroll', maybeReposition);
})();
</script>



<script>
// v1.7.17 â€” move buttons & drawers inside #menu-root and make é»é¤ button toggle open/close
(function(){
  const menuRoot = document.getElementById('menu-root');
  const orderFab = document.getElementById('mh-fab');
  const cartFab  = document.getElementById('mh-cart-fab');
  const cartEl   = document.getElementById('mh-cart');
  const panel    = document.getElementById('mh-panel');
  const cartClose= document.getElementById('mh-cart-close');
  const panelClose= document.getElementById('mh-close');

  if (menuRoot){
    // wrap both buttons into a single floating container inside the menu frame
    const wrap = document.createElement('div');
    wrap.id = 'mh-floating';
    // append buttons
    if (orderFab) wrap.appendChild(orderFab);
    if (cartFab)  wrap.appendChild(cartFab);
    // attach
    menuRoot.appendChild(wrap);

    // move drawers inside the menu so they follow scroll with the menu
    if (cartEl)  menuRoot.appendChild(cartEl);
    if (panel)   menuRoot.appendChild(panel);
  }

  // disable previous desktop placement logic if present
  try{
    window.removeEventListener('resize', window.placeDesktop || (()=>{}));
    window.removeEventListener('scroll',  window.placeDesktop || (()=>{}));
  }catch(e){}

  function isOpen(el){ return el && el.classList.contains('open'); }
  function toggle(el, force){
    if (!el) return;
    const on = (typeof force === 'boolean') ? force : !isOpen(el);
    el.classList.toggle('open', on);
    el.setAttribute('aria-hidden', on ? 'false' : 'true');
  }

  // é»é¤ï¼šé»åŒä¸€é¡†å¯é–‹/æ”¶
  orderFab?.addEventListener('click', (ev)=>{ ev.preventDefault(); toggle(panel); });
  panelClose?.addEventListener('click', (ev)=>{ ev.preventDefault(); toggle(panel, false); });

  // è³¼ç‰©è»Šï¼šç¶­æŒåŸæœ¬é»åŒä¸€é¡†å¯é–‹/æ”¶ï¼Œä¸¦ä¿ç•™å…§éƒ¨æ”¶åˆéˆ•
  cartFab?.addEventListener('click', (ev)=>{ ev.preventDefault(); toggle(cartEl); });
  cartClose?.addEventListener('click', (ev)=>{ ev.preventDefault(); toggle(cartEl, false); });
})();
</script>


<script>
// v1.7.18 â€” robust toggle (capture-phase) to avoid older handlers breaking clicks
(function(){
  const $ = (id)=>document.getElementById(id);
  const menuRoot = $('menu-root');
  const orderFab = $('mh-fab');
  const cartFab  = $('mh-cart-fab');
  const cartEl   = $('mh-cart');
  const panel    = $('mh-panel');
  const cartClose= $('mh-cart-close');
  const panelClose= $('mh-close');

  // Ensure elements live under #menu-root so they scroll with the menu
  if (menuRoot){
    // Create container once
    let wrap = document.getElementById('mh-floating');
    if (!wrap){
      wrap = document.createElement('div');
      wrap.id = 'mh-floating';
      menuRoot.appendChild(wrap);
    }
    if (orderFab && orderFab.parentElement !== wrap) wrap.appendChild(orderFab);
    if (cartFab  && cartFab.parentElement !== wrap)  wrap.appendChild(cartFab);
    if (cartEl   && cartEl.parentElement  !== menuRoot) menuRoot.appendChild(cartEl);
    if (panel    && panel.parentElement   !== menuRoot) menuRoot.appendChild(panel);
  }

  function isOpen(el){ return el?.classList.contains('open'); }
  function show(el){ if(!el) return; el.classList.add('open'); el.setAttribute('aria-hidden','false'); }
  function hide(el){ if(!el) return; el.classList.remove('open'); el.setAttribute('aria-hidden','true'); }
  function toggle(el){ if(!el) return; (isOpen(el)?hide:show)(el); }

  // Capture-phase to run before legacy listeners; also stopImmediatePropagation to prevent double handling
  orderFab?.addEventListener('click', (ev)=>{ ev.preventDefault(); ev.stopImmediatePropagation(); ev.stopPropagation(); toggle(panel); }, true);
  panelClose?.addEventListener('click', (ev)=>{ ev.preventDefault(); ev.stopImmediatePropagation(); ev.stopPropagation(); hide(panel); }, true);

  cartFab?.addEventListener('click', (ev)=>{ ev.preventDefault(); ev.stopImmediatePropagation(); ev.stopPropagation(); toggle(cartEl); }, true);
  cartClose?.addEventListener('click', (ev)=>{ ev.preventDefault(); ev.stopImmediatePropagation(); ev.stopPropagation(); hide(cartEl); }, true);
})();
</script>


<script>
// v1.7.19 â€” make buttons & drawers follow scroll on small screens by switching to fixed and aligning to menu's right edge
(function(){
  const $ = (id)=>document.getElementById(id);
  const menuRoot = $('menu-root');
  const wrap     = $('mh-floating') || (function(){ const d=document.createElement('div'); d.id='mh-floating'; return d; })();
  const orderFab = $('mh-fab');
  const cartFab  = $('mh-cart-fab');
  const cartEl   = $('mh-cart');
  const panel    = $('mh-panel');
  const cartClose= $('mh-cart-close');
  const panelClose= $('mh-close');

  // Ensure structure
  if (menuRoot){
    if (!wrap.parentElement) menuRoot.appendChild(wrap);
    if (orderFab && orderFab.parentElement !== wrap) wrap.appendChild(orderFab);
    if (cartFab  && cartFab.parentElement !== wrap)  wrap.appendChild(cartFab);
    if (cartEl   && cartEl.parentElement  !== menuRoot) menuRoot.appendChild(cartEl);
    if (panel    && panel.parentElement   !== menuRoot) menuRoot.appendChild(panel);
  }

  // Helpers
  const root = document.documentElement;
  function isOpen(el){ return el?.classList.contains('open'); }
  function show(el){ if(!el) return; el.classList.add('open'); el.setAttribute('aria-hidden','false'); }
  function hide(el){ if(!el) return; el.classList.remove('open'); el.setAttribute('aria-hidden','true'); }
  function toggle(el){ if(!el) return; (isOpen(el)?hide:show)(el); }

  // Clicks (capture-phase) to guarantee toggling
  orderFab?.addEventListener('click', (ev)=>{ ev.preventDefault(); ev.stopImmediatePropagation(); ev.stopPropagation(); toggle(panel); }, true);
  panelClose?.addEventListener('click', (ev)=>{ ev.preventDefault(); ev.stopImmediatePropagation(); ev.stopPropagation(); hide(panel); }, true);
  cartFab?.addEventListener('click', (ev)=>{ ev.preventDefault(); ev.stopImmediatePropagation(); ev.stopPropagation(); toggle(cartEl); }, true);
  cartClose?.addEventListener('click', (ev)=>{ ev.preventDefault(); ev.stopImmediatePropagation(); ev.stopPropagation(); hide(cartEl); }, true);

  // Layout: on small screens / scrollable contexts, use fixed + align to menu's right edge
  function needsFollow(){
    // If content taller than viewport, we consider it a scrolling (mobile-like) context
    const doc = document.documentElement;
    const scrolly = (doc.scrollHeight - window.innerHeight) > 8;
    // Or if menu taller than viewport
    const mr = menuRoot?.getBoundingClientRect();
    const menuTooTall = !!mr && (mr.height - window.innerHeight) > 8;
    // Or if viewport width is small
    const vwSmall = window.matchMedia('(max-width: 1024px)').matches;
    return scrolly || menuTooTall || vwSmall;
  }

  function place(){
    const mr = menuRoot?.getBoundingClientRect();
    if (!mr) return;

    const btnH = wrap.getBoundingClientRect().height || 44;
    const gutter = 12;

    if (needsFollow()){
      // Switch to fixed mode
      root.classList.add('fixed-drawer');

      // Align buttons to menu's right-inside edge
      const wrapW = wrap.getBoundingClientRect().width;
      let left = Math.round(mr.right - wrapW - gutter);
      if (left < mr.left + gutter) left = mr.left + gutter;
      wrap.style.left = left + 'px';
      wrap.style.right = 'auto';
      wrap.style.bottom = gutter + 'px';
      wrap.style.top = 'auto';
      wrap.style.position = 'fixed';

      // Drawers: width close to menu, slightly inset
      const leftInset = Math.round(mr.left + gutter);
      const rightInset = Math.round(window.innerWidth - mr.right + gutter);
      const bottomBase = gutter + btnH + 8;
      [cartEl, panel].forEach((el)=>{
        if (!el) return;
        el.style.position = 'fixed';
        el.style.left  = leftInset + 'px';
        el.style.right = rightInset + 'px';
        el.style.bottom= bottomBase + 'px';
        el.style.top   = 'auto';
        el.style.width = 'auto';
        el.style.maxWidth = 'none';
      });
    } else {
      // Desktop (no scroll): keep inside the menu as absolute
      root.classList.remove('fixed-drawer');
      wrap.style.position = 'absolute';
      wrap.style.right = '12px';
      wrap.style.left = 'auto';
      wrap.style.bottom = '12px';
      wrap.style.top = 'auto';

      [cartEl, panel].forEach((el)=>{
        if (!el) return;
        el.style.position = 'absolute';
        el.style.left = '12px';
        el.style.right = '12px';
        el.style.bottom = 'calc(12px + 44px + 8px)';
        el.style.top = 'auto';
      });
    }
  }

  // Initial placement after current frame to let layout settle
  requestAnimationFrame(()=>{ place(); });
  window.addEventListener('resize', place, {passive:true});
  window.addEventListener('scroll', place, {passive:true});
})();
</script>




<script>
// v1.7.28 â€” Non-invasive clamp with fixed tiny gap = 0.5px
(function(){
  const menuRoot = document.querySelector('#menu-root');
  if (!menuRoot) return;

  const $ = (sel) => document.querySelector(sel);
  const cartEl = $('.mh-cart');
  const panel  = $('.mh-panel');

  function frameBox(){
    const mr = menuRoot.getBoundingClientRect();
    const cs = getComputedStyle(menuRoot);
    const padL = parseFloat(cs.paddingLeft)  || 0;
    const padR = parseFloat(cs.paddingRight) || 0;
    const left  = mr.left  + padL;
    const right = mr.right - padR;
    return {left, right};
  }

  function clamp(el){
    if (!el) return;
    const st = getComputedStyle(el);
    if (st.position !== 'fixed') return; // åªåœ¨æµ®å‹•ç‹€æ…‹æ‰é‰—åˆ¶
    const fb = frameBox();
    const GAP = 0.5; // ä½ æŒ‡å®šçš„ 0.5px è¦–è¦ºé–“è·
    const EPS = 0.5; // é˜²æ­¢æµ®é»/å¯¦é«”åƒç´ å–æ•´å¤–æº¢

    const left = fb.left + GAP;
    const width = Math.max(0, (fb.right - fb.left) - GAP*2 - EPS);

    el.style.setProperty('left', left + 'px', 'important');
    el.style.setProperty('right', 'auto', 'important');
    el.style.setProperty('width', width + 'px', 'important');
    el.style.setProperty('max-width', width + 'px', 'important');
    el.style.setProperty('min-width', '0px', 'important');
    el.style.setProperty('margin-left', '0px', 'important');
    el.style.setProperty('margin-right', '0px', 'important');
    el.style.setProperty('box-sizing', 'border-box', 'important');
  }

  function run(){
    clamp(cartEl);
    clamp(panel);
  }

  if (typeof window.place === 'function'){
    const orig = window.place;
    window.place = function(){
      const r = orig.apply(this, arguments);
      requestAnimationFrame(run);
      return r;
    };
  }

  let raf = null;
  const queue = () => { if (!raf) raf = requestAnimationFrame(()=>{ raf = null; run(); }); };
  const mo = new MutationObserver(queue);
  mo.observe(document.documentElement, { attributes:true, childList:true, subtree:true });

  window.addEventListener('scroll', queue, {passive:true});
  window.addEventListener('resize', queue);
  window.addEventListener('orientationchange', queue);
  window.addEventListener('load', queue);

  queue();
})();
</script>






<!-- Bulk Combo Dialog --><div id="mh-bulk-dialog" style="display:none; position: fixed; inset: 0; z-index: 10060; align-items: center; justify-content: center;">
  <div style="position:absolute; inset:0; background: rgba(0,0,0,.35);" data-close="1"></div>
  <div style="position: relative; width: min(720px, 92vw); max-height: 82vh; overflow:auto; background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:14px; box-shadow:0 10px 30px rgba(0,0,0,.24);">
    <div style="display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:10px;">
      <strong>æ‰¹æ¬¡å»ºç«‹é›è›‹ç³•çµ„åˆ</strong>
      <button id="mh-bulk-close" class="mh-btn">é—œé–‰</button>
    </div>
    <div class="mh-row-2">
      <div class="mh-field">
        <label>ç›®æ¨™ä»½æ•¸</label>
        <input id="mh-bulk-total" type="number" class="mh-number" min="1" step="1" value="20">
      </div>
      <div class="mh-field">
        <label>åˆ†é…ç­–ç•¥</label>
        <select id="mh-bulk-strategy" class="mh-select">
          <option value="even">å¹³å‡åˆ†é…</option>
          <option value="random">éš¨æ©Ÿåˆ†é…</option>
        </select>
      </div>
    </div>
    <div class="mh-field">
      <label></label>
      <div id="mh-bulk-list" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(180px,1fr)); gap:12px;"></div>
    </div>
    <div class="mh-actions-inline" style="margin-top:8px;">
      <button id="mh-bulk-checkall" class="mh-btn">å…¨é¸/å…¨ä¸é¸</button>
      <button id="mh-bulk-ok" class="mh-btn primary">åŠ å…¥è³¼ç‰©è»Š</button>
    </div>
  </div>
</div>



<script>
// bulk-combo v2.1 â€” ä¾åˆ†éš”ç·šåˆ†æ¬„ï¼›æŠŠç´”ã€Œ-----ã€ç•¶ä½œåˆ†éš”è€Œéé¸é …ï¼›ä¸­æ–‡ä»‹é¢
(function(){
  function ready(fn){ if (document.readyState!=='loading') fn(); else document.addEventListener('DOMContentLoaded', fn); }
  ready(function(){
    const openBtn = document.getElementById('mh-bulk-combo');
    const dialog  = document.getElementById('mh-bulk-dialog');
    if (!openBtn || !dialog) return;

    const listBox = document.getElementById('mh-bulk-list');
    const totalEl = document.getElementById('mh-bulk-total');
    const strategyEl = document.getElementById('mh-bulk-strategy');
    const okBtn   = document.getElementById('mh-bulk-ok');
    const closeBtn= document.getElementById('mh-bulk-close');
    const toggleAllBtn = document.getElementById('mh-bulk-checkall');

    const typeSel = document.getElementById('mh-type');
    const aSel = document.getElementById('mh-a');
    const bSel = document.getElementById('mh-b');
    const qtyInput = document.getElementById('mh-qty') || document.querySelector('input[name="qty"]');
    const addInline = document.getElementById('mh-add-inline') || document.querySelector('#mh-add-inline');

    const isDividerText = (t)=> {  if (!t) return false;  const s = String(t).trim();  if (!s) return false;  // divider if only separators: dashes, dots, middots, bullets, underscores, spaces
  return /^[\s\-â€“â€”_\.\Â·â€¢ï¼ã€‚ãƒ»]+$/.test(s);};
    const isPlaceholder = (v)=> !v || v==='å•†å“';

    // å›å‚³åˆ†çµ„ï¼Œæ¯æ ¼æˆå“¡ç‚º {text, value}
    function getEggGroups(){
      // DOM ä¸»è·¯å¾‘ï¼šç”¨ option çš„ text åˆ¤æ–·åˆ†éš”ç·šã€‚value ä¿ç•™ç”¨ä¾†é¸å–ã€‚
      const prev = typeSel.value;
      const evt = new Event('change', {bubbles:true});
      typeSel.value = 'é›è›‹ç³•'; typeSel.dispatchEvent(evt);
      const opts = Array.from(aSel.options);
      // é‚„åŸ
      typeSel.value = prev; typeSel.dispatchEvent(evt);

      const groups = []; let cur = [];
      for (const o of opts){
        const text = (o.textContent||o.label||o.value||'').trim();
        const value = o.value;
        if (isPlaceholder(value)) continue;
        if (isDividerText(text)){
          if (cur.length) { groups.push(cur); cur=[]; }
          continue; // ä¸è¦æŠŠåˆ†éš”ç·šç•¶é¸é …
        }
        cur.push({text, value});
      }
      if (cur.length) groups.push(cur);
      return groups;
    }

    function addToCartPair(aValue, bValue, qty){
      if (!typeSel || !aSel || !bSel || !addInline) return;
      const prevType = typeSel.value;
      typeSel.value = 'é›è›‹ç³•';
      typeSel.dispatchEvent(new Event('change', {bubbles:true}));

      aSel.value = aValue || '';
      bSel.value = bValue || '';
      aSel.dispatchEvent(new Event('change', {bubbles:true}));
      bSel.dispatchEvent(new Event('change', {bubbles:true}));

      if (qtyInput){ qtyInput.value = String(qty||1); }
      addInline.click();
    }

    function openDialog(){
      const groups = getEggGroups(); // [ [{text,value}...] , ... ]
      listBox.innerHTML = '';
      groups.forEach((g)=>{
        const col = document.createElement('div');
        col.style.display='flex'; col.style.flexDirection='column'; col.style.gap='6px';
        g.forEach(({text, value})=>{
          const id = 'chk_' + btoa(unescape(encodeURIComponent(value))).replace(/=/g,'').slice(0,12);
          const row = document.createElement('label');
          row.style.display='flex'; row.style.alignItems='center'; row.style.gap='6px';
          row.innerHTML = `<input type="checkbox" class="mh-bulk-chk" data-val="${value}" id="${id}" checked> <span>${text}</span>`;
          col.appendChild(row);
        });
        listBox.appendChild(col);
      });
      dialog.style.display='flex';
    }
    function closeDialog(){ dialog.style.display='none'; }

    function combinations(values){
      const out=[]; for(let i=0;i<values.length;i++){ for(let j=i+1;j<values.length;j++){ out.push([values[i], values[j]]); } } return out;
    }
    function distributeEven(pairs, total){
      const n = pairs.length; if (n===0) return [];
      const base = Math.floor(total / n);
      let rem = total % n;
      const plan = pairs.map(p=> ({pair:p, qty: base}));
      for (let i=0; i<rem; i++){ plan[i % n].qty += 1; }
      return plan.filter(x=> x.qty>0);
    }
    function distributeRandom(pairs, total){
      const plan = pairs.map(p=> ({pair:p, qty:0}));
      for (let i=0;i<total;i++){ plan[Math.floor(Math.random()*pairs.length)].qty += 1; }
      return plan.filter(x=> x.qty>0);
    }

    toggleAllBtn.addEventListener('click', ()=>{
      const boxes = Array.from(listBox.querySelectorAll('.mh-bulk-chk'));
      const allChecked = boxes.every(b=> b.checked);
      boxes.forEach(b=> b.checked = !allChecked);
    });

    openBtn.addEventListener('click', openDialog);
    closeBtn.addEventListener('click', closeDialog);
    dialog.addEventListener('click', (e)=>{ if (e.target && e.target.getAttribute('data-close')) closeDialog(); });

    okBtn.addEventListener('click', ()=>{
      const total = Math.max(1, parseInt(totalEl.value||'1',10));
      const selectedValues = Array.from(listBox.querySelectorAll('.mh-bulk-chk'))
        .filter(b=> b.checked)
        .map(b=> b.getAttribute('data-val'))
        .filter(Boolean);
      if (selectedValues.length < 2){ alert('è«‹è‡³å°‘å‹¾é¸å…©å€‹å£å‘³'); return; }
      const pairs = combinations(selectedValues);
      const plan = (strategyEl.value==='random') ? distributeRandom(pairs, total) : distributeEven(pairs, total);
      plan.forEach(it=> addToCartPair(it.pair[0], it.pair[1], it.qty));
      closeDialog();
    });
  });
})();
</script>




<script>
// v1.7.56 â€” æ ¹æ“šè¦–çª—èˆ‡#menu-rootå¯ç”¨é«˜åº¦ï¼Œå‹•æ…‹è¨ˆç®—è³¼ç‰©è»Šæ¸…å–®çš„max-heightï¼Œé¿å…å †é«˜
(function(){
  function sizeCart(){
    try{
      var root   = document.getElementById('menu-root');
      var cart   = document.getElementById('mh-cart');
      var list   = document.getElementById('mh-cart-list');
      if (!cart || !list) return;

      var wrap   = document.getElementById('mh-floating');
      var btnH   = wrap ? (wrap.getBoundingClientRect().height + 8) : 52;
      var topPad = 12, bottomPad = 12;

      var rootRect = root ? root.getBoundingClientRect() : null;
      var avail = (rootRect ? rootRect.height : window.innerHeight) - btnH - topPad - bottomPad;
      // ä»¥è¦–çª—0.9å€èˆ‡å®¹å™¨å¯ç”¨é«˜åº¦çš„è¼ƒå°å€¼ç‚ºä¸Šé™
      var hardCap = Math.floor(Math.min(window.innerHeight * 0.9, avail));
      hardCap = Math.max(160, hardCap); // çµ¦æœ€å°é«˜åº¦ï¼Œé¿å…æ¥µç«¯æƒ…æ³

      cart.style.setProperty('--mh-cart-max', hardCap + 'px');

      // æ‰£é™¤éæ»¾å‹•å€å¡Šçš„é«˜åº¦
      var used = 0;
      var blocks = [];
      var head = cart.querySelector('h4');
      if (head) blocks.push(head);
      var extras = cart.querySelectorAll('.mh-total, .mh-field, .mh-panel-actions');
      extras.forEach ? extras.forEach(function(el){ blocks.push(el); }) : null;
      for (var i=0;i<blocks.length;i++){
        var r = blocks[i].getBoundingClientRect();
        used += r ? r.height : 0;
      }
      // å…§é‚Šè·ä¼°è¨ˆ
      var pad = 16;
      var listMax = hardCap - used - pad;
      listMax = Math.max(120, listMax);

      cart.style.setProperty('--mh-cart-list-max', listMax + 'px');
    }catch(e){ /* no-op */ }
  }

  // åœ¨å…§å®¹è®Šå‹•ã€å°ºå¯¸æ”¹è®Šã€é–‹é—œæŠ½å±œæ™‚éƒ½é‡æ–°è¨ˆç®—
  function setupObservers(){
    var cart = document.getElementById('mh-cart');
    var list = document.getElementById('mh-cart-list');
    if (!cart || !list) return;

    // ç›£çœ‹æ¸…å–®å­ç¯€é»è®ŠåŒ–
    var mo = new MutationObserver(sizeCart);
    mo.observe(list, { childList: true });

    // ç›£çœ‹è³¼ç‰©è»Šé–‹é—œ
    var mo2 = new MutationObserver(sizeCart);
    mo2.observe(cart, { attributes: true, attributeFilter: ['class'] });

    window.addEventListener('resize', sizeCart, { passive: true });
    window.addEventListener('orientationchange', sizeCart);
    window.addEventListener('scroll', function(){
      // åƒ…ç•¶è³¼ç‰©è»Šåœ¨è¦–å£å…§æ™‚å†ç®—ï¼Œé¿å…å¤šé¤˜è¨ˆç®—
      sizeCart();
    }, { passive: true });

    // åˆæ¬¡è¨ˆç®—
    sizeCart();
  }

  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', setupObservers);
  }else{
    setupObservers();
  }
})();
</script>


<script>
// v1.7.56 â€” åªè¨ˆç®—å¤–å±¤ .mh-cart çš„å¯ç”¨é«˜åº¦ç‚ºä¸Šé™ï¼Œçµ±ä¸€ç”±å¤–å±¤æ»¾å‹•
(function(){
  function sizeCart(){
    try{
      var root = document.getElementById('menu-root');
      var cart = document.getElementById('mh-cart');
      if (!cart) return;

      var wrap   = document.getElementById('mh-floating');
      var btnH   = wrap ? (wrap.getBoundingClientRect().height + 8) : 52;
      var topPad = 12, bottomPad = 12;

      var rootRect = root ? root.getBoundingClientRect() : null;
      var avail = (rootRect ? rootRect.height : window.innerHeight) - btnH - topPad - bottomPad;
      var hardCap = Math.floor(Math.min(window.innerHeight * 0.9, avail));
      hardCap = Math.max(220, hardCap);
      cart.style.setProperty('--mh-cart-max', hardCap + 'px');
    }catch(e){ /* no-op */ }
  }

  function setup(){
    var cart = document.getElementById('mh-cart');
    if (!cart) return;
    new MutationObserver(sizeCart).observe(cart, { childList:true, subtree:true, attributes:true });
    window.addEventListener('resize', sizeCart, { passive:true });
    window.addEventListener('orientationchange', sizeCart);
    sizeCart();
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', setup);
  } else {
    setup();
  }
})();
</script>


<script>
// v1.7.56 â€” å¤–å±¤é«˜åº¦è‡ªé©æ‡‰ + æœ‰å“é …æ™‚é›¢é–‹ç¢ºèª
(function(){
  function sizeCart(){
    try{
      var root = document.getElementById('menu-root');
      var cart = document.getElementById('mh-cart');
      if (!cart) return;
      var wrap   = document.getElementById('mh-floating');
      var btnH   = wrap ? (wrap.getBoundingClientRect().height + 8) : 52;
      var rootRect = root ? root.getBoundingClientRect() : null;
      var avail = (rootRect ? rootRect.height : window.innerHeight) - btnH - 24;
      var cap = Math.floor(Math.min(window.innerHeight * 0.9, avail));
      cart.style.setProperty('--mh-cart-max', Math.max(220, cap) + 'px');
    }catch(e){}
  }
  function setupSize(){
    var cart = document.getElementById('mh-cart');
    if (!cart) return;
    new MutationObserver(sizeCart).observe(cart, { childList:true, subtree:true, attributes:true });
    window.addEventListener('resize', sizeCart, { passive:true });
    window.addEventListener('orientationchange', sizeCart);
    sizeCart();
  }

  // é›¢é–‹å‰ç¢ºèª
  var needConfirm=false;
  function updateNeed(){
    var list = document.getElementById('mh-cart-list');
    var count = list ? list.children.length : 0;
    needConfirm = count > 0;
  }
  function setupUnload(){
    var list = document.getElementById('mh-cart-list');
    if (list){
      new MutationObserver(updateNeed).observe(list, { childList:true });
    }
    updateNeed();
    window.addEventListener('beforeunload', function(e){
      if(!needConfirm) return;
      e.preventDefault();
      e.returnValue='';
    });
  }

  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', function(){
      setupSize(); setupUnload();
    });
  }else{
    setupSize(); setupUnload();
  }
})();
</script>
<script>
  (function(){
    // è¨­å®šè¦è¨˜æ†¶çš„æ¬„ä½ ID åˆ—è¡¨
    const fieldsToRemember = ['mh-addr', 'mh-sign', 'mh-name', 'mh-phone'];

    // å‡½æ•¸ï¼šå„²å­˜æ¬„ä½å€¼åˆ°ç€è¦½å™¨çš„ localStorage
    function saveFields() {
      fieldsToRemember.forEach(id => {
        const input = document.getElementById(id);
        if (input) {
          try {
            // ä½¿ç”¨ç‰¹å®šçš„ key (mh-cart-æ¬„ä½ID) ä¾†å„²å­˜å€¼
            localStorage.setItem(`mh-cart-${id}`, input.value);
          } catch (e) {
            // è™•ç†ç„¡æ³•å­˜å–çš„éŒ¯èª¤ï¼Œä¾‹å¦‚ç€è¦½å™¨éš±ç§è¨­å®š
            console.warn(`ç„¡æ³•å„²å­˜æ¬„ä½ ${id} åˆ° localStorage:`, e);
          }
        }
      });
    }

    // å‡½æ•¸ï¼šå¾ç€è¦½å™¨çš„ localStorage è¼‰å…¥æ¬„ä½å€¼
    function loadFields() {
      fieldsToRemember.forEach(id => {
        const input = document.getElementById(id);
        if (input) {
          try {
            const savedValue = localStorage.getItem(`mh-cart-${id}`);
            if (savedValue !== null) {
              // è¼‰å…¥å„²å­˜çš„å€¼
              input.value = savedValue;
            }
          } catch (e) {
            console.warn(`ç„¡æ³•å¾ localStorage è¼‰å…¥æ¬„ä½ ${id}:`, e);
          }
        }
      });
    }

    // 1. é é¢è¼‰å…¥å¾Œï¼Œç«‹å³è¼‰å…¥å…ˆå‰å„²å­˜çš„è³‡æ–™
    window.addEventListener('load', loadFields);

    // 2. ç›£è½æ¬„ä½è¼¸å…¥äº‹ä»¶ï¼Œæ¯ç•¶æ¬„ä½å…§å®¹æ”¹è®Šæ™‚å°±å„²å­˜
    document.addEventListener('DOMContentLoaded', () => {
      fieldsToRemember.forEach(id => {
        const input = document.getElementById(id);
        if (input) {
          // ä½¿ç”¨ input äº‹ä»¶ç¢ºä¿æ¯æ¬¡è¼¸å…¥éƒ½å³æ™‚å„²å­˜
          input.addEventListener('input', saveFields);
        }
      });
    });

  })();
</script>

<script>
  (function(){
    // å–å¾—ç›¸é—œå…ƒç´ 
    const panel = document.getElementById('mh-panel'); // å»ºç«‹è¨‚å–®å°å¡é¢æ¿
    const cart = document.getElementById('mh-cart');   // è³¼ç‰©è»Šä»‹é¢
    const addInlineBtn = document.getElementById('mh-add-inline'); // å°å¡å…§çš„åŠ å…¥è³¼ç‰©è»ŠæŒ‰éˆ•
    const bulkOkBtn = document.getElementById('mh-bulk-ok');       // æ‰¹æ¬¡çµ„åˆçš„åŠ å…¥è³¼ç‰©è»ŠæŒ‰éˆ•

    // å¦‚æœæ‰¾ä¸åˆ°ä»»ä¸€å…ƒç´ ï¼Œå‰‡ä¸åŸ·è¡Œå¾ŒçºŒé‚è¼¯
    if (!panel || !cart) return;

    // è¼”åŠ©å‡½å¼ï¼šé—œé–‰ä¸»è¨‚å–®å°å¡é¢æ¿
    function hidePanel(){
      panel.classList.remove('open');
      panel.setAttribute('aria-hidden', 'true');
    }

    // è¼”åŠ©å‡½å¼ï¼šé–‹å•Ÿè³¼ç‰©è»Šä»‹é¢ (å‡è¨­æ˜¯åŠ ä¸Š 'open' class ä¾†é¡¯ç¤º)
    function showCart(){
      cart.classList.add('open');
      cart.setAttribute('aria-hidden', 'false');
    }

    // ä¸»è¦å‹•ä½œå‡½å¼ï¼šæ”¶åˆå°å¡ä¸¦æ‰“é–‹è³¼ç‰©è»Š
    function handleCartAction(){
      // 1. æ”¶åˆã€Œå»ºç«‹è¨‚å–®å°å¡ã€
      hidePanel();
      
      // 2. æ‰“é–‹è³¼ç‰©è»Šä»‹é¢
      showCart();
    }

    // 1. ç›£è½ã€Œå»ºç«‹è¨‚å–®å°å¡ã€å…§çš„ã€ŒåŠ å…¥è³¼ç‰©è»Š/æ›´æ–°é …ç›®ã€æŒ‰éˆ•
    if (addInlineBtn) {
      addInlineBtn.addEventListener('click', handleCartAction);
    }

    // 2. ç›£è½ã€Œæ‰¹æ¬¡å»ºç«‹é›è›‹ç³•çµ„åˆã€å…§çš„ã€ŒåŠ å…¥è³¼ç‰©è»Šã€æŒ‰éˆ•
    if (bulkOkBtn) {
      bulkOkBtn.addEventListener('click', handleCartAction);
    }
  })();
</script>

</body></html>